"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),t=require("vant"),n=e=>null!=e,o=e=>"function"==typeof e,l=e=>null!==e&&"object"==typeof e,i=e=>"number"==typeof e||/^\d+(\.\d+)?$/.test(e);function a(){}const r=Object.assign,c="undefined"!=typeof window;function s(e,t){const n=t.split(".");let o=e;return n.forEach((e=>{var t;o=l(o)&&null!=(t=o[e])?t:""})),o}function u(e,t,n){return t.reduce(((t,o)=>(n&&void 0===e[o]||(t[o]=e[o]),t)),{})}const d=(e,t)=>JSON.stringify(e)===JSON.stringify(t),v=[Number,String],p={type:Boolean,default:!0},f=e=>({type:e,required:!0}),m=()=>({type:Array,default:()=>[]}),h=e=>({type:v,default:e}),g=e=>({type:String,default:e});var b="undefined"!=typeof window;function w(e){return b?requestAnimationFrame(e):-1}function y(e){w((()=>w(e)))}var x,C,N=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),k=t=>{const n=e.unref(t);if(n===window){const e=n.innerWidth,t=n.innerHeight;return N(e,t)}return(null==n?void 0:n.getBoundingClientRect)?n.getBoundingClientRect():N(0,0)};function V(t){const n=e.inject(t,null);if(n){const t=e.getCurrentInstance(),{link:o,unlink:l,internalChildren:i}=n;o(t),e.onUnmounted((()=>l(t)));return{parent:n,index:e.computed((()=>i.indexOf(t)))}}return{parent:null,index:e.ref(-1)}}function S(t,n,o){const l=function(t){const n=[],o=t=>{Array.isArray(t)&&t.forEach((t=>{var l;e.isVNode(t)&&(n.push(t),(null==(l=t.component)?void 0:l.subTree)&&(n.push(t.component.subTree),o(t.component.subTree.children)),t.children&&o(t.children))}))};return o(t),n}(t.subTree.children);o.sort(((e,t)=>l.indexOf(e.vnode)-l.indexOf(t.vnode)));const i=o.map((e=>e.proxy));n.sort(((e,t)=>i.indexOf(e)-i.indexOf(t)))}function T(t){const n=e.reactive([]),o=e.reactive([]),l=e.getCurrentInstance();return{children:n,linkChildren:i=>{e.provide(t,Object.assign({link:e=>{e.proxy&&(o.push(e),n.push(e.proxy),S(l,n,o))},unlink:e=>{const t=o.indexOf(e);n.splice(t,1),o.splice(t,1)},children:n,internalChildren:o},i))}}}function $(t){let n;e.onMounted((()=>{t(),e.nextTick((()=>{n=!0}))})),e.onActivated((()=>{n&&t()}))}function B(t,n,o={}){if(!b)return;const{target:l=window,passive:i=!1,capture:a=!1}=o;let r;const c=o=>{const l=e.unref(o);l&&!r&&(l.addEventListener(t,n,{capture:a,passive:i}),r=!0)},s=o=>{const l=e.unref(o);l&&r&&(l.removeEventListener(t,n,a),r=!1)};e.onUnmounted((()=>s(l))),e.onDeactivated((()=>s(l))),$((()=>c(l))),e.isRef(l)&&e.watch(l,((e,t)=>{s(t),c(e)}))}var O,I=/scroll|auto|overlay/i,z=b?window:void 0;function M(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function A(t,n=z){const o=e.ref();return e.onMounted((()=>{t.value&&(o.value=function(e,t=z){let n=e;for(;n&&n!==t&&M(n);){const{overflowY:e}=window.getComputedStyle(n);if(I.test(e))return n;n=n.parentNode}return t}(t.value,n))})),o}function E(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function H(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function D(e,t){if(e===window)return 0;const n=t?E(t):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;return k(e).top+n}c&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function P(e,t){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&(e=>{e.stopPropagation()})(e)}function R(t){const n=e.unref(t);if(!n)return!1;const o=window.getComputedStyle(n),l="none"===o.display,i=null===n.offsetParent&&"fixed"!==o.position;return l||i}const{width:L,height:j}=function(){if(!x&&(x=e.ref(0),C=e.ref(0),b)){const e=()=>{x.value=window.innerWidth,C.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:x,height:C}}();function Y(e){if(n(e))return i(e)?`${e}px`:String(e)}let X;function W(e){return+(e=e.replace(/rem/g,""))*function(){if(!X){const e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;X=parseFloat(t)}return X}()}function F(e){if("number"==typeof e)return e;if(c){if(e.includes("rem"))return W(e);if(e.includes("vw"))return function(e){return+(e=e.replace(/vw/g,""))*L.value/100}(e);if(e.includes("vh"))return function(e){return+(e=e.replace(/vh/g,""))*j.value/100}(e)}return parseFloat(e)}const Z=/-(\w)/g,_=e=>e.replace(Z,((e,t)=>t.toUpperCase())),U=(e,t,n)=>Math.min(Math.max(e,t),n),{hasOwnProperty:q}=Object.prototype;function J(e,t){return Object.keys(t).forEach((o=>{!function(e,t,o){const i=t[o];n(i)&&(q.call(e,o)&&l(i)?e[o]=J(Object(e[o]),i):e[o]=i)}(e,t,o)})),e}const G=e.ref("zh-CN"),K=e.reactive({"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}}});var Q={messages:()=>K[G.value],use(e,t){G.value=e,this.add({[e]:t})},add(e={}){J(K,e)}};function ee(e){const t=_(e)+".";return(e,...n)=>{const l=Q.messages(),i=s(l,t+e)||s(l,e);return o(i)?i(...n):i}}function te(e,t){return t?"string"==typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,n)=>t+te(e,n)),""):Object.keys(t).reduce(((n,o)=>n+(t[o]?te(e,o):"")),""):""}function ne(e){return(t,n)=>(t&&"string"!=typeof t&&(n=t,t=""),`${t=t?`${e}__${t}`:e}${te(t,n)}`)}function oe(e){const t=`van-${e}`;return[t,ne(t),ee(t)]}function le(e,{args:t=[],done:n,canceled:i}){if(e){const c=e.apply(null,t);l(r=c)&&o(r.then)&&o(r.catch)?c.then((e=>{e?n():i&&i()})).catch(a):c?n():i&&i()}else n();var r}function ie(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(_(`-${n}`),e))},e}function ae(e){const t=`van-${e}`;return[t,ne(t),ee(t)]}const[re,ce,se]=ae("picker"),ue=e=>e.find((e=>!e.disabled))||e[0];function de(e,t){for(let n=t=U(t,0,e.length);n<e.length;n++)if(!e[n].disabled)return n;for(let n=t-1;n>=0;n--)if(!e[n].disabled)return n;return 0}function ve(e,t,n){const o=e.findIndex((e=>e[n.value]===t));return e[de(e,o)]}function pe(t){const n=e.getCurrentInstance();n&&r(n.proxy,t)}const[fe,me]=oe("loading"),he=Array(12).fill(null).map(((t,n)=>e.createVNode("i",{class:me("line",String(n+1))},null))),ge=e.createVNode("svg",{class:me("circular"),viewBox:"25 25 50 50"},[e.createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),be={size:v,type:g("circular"),color:String,vertical:Boolean,textSize:v,textColor:String};const we=ie(e.defineComponent({name:fe,props:be,setup(t,{slots:o}){const l=e.computed((()=>r({color:t.color},function(e){if(n(e)){if(Array.isArray(e))return{width:Y(e[0]),height:Y(e[1])};const t=Y(e);return{width:t,height:t}}}(t.size)))),i=()=>{var n;if(o.default)return e.createVNode("span",{class:me("text"),style:{fontSize:Y(t.textSize),color:null!=(n=t.textColor)?n:t.color}},[o.default()])};return()=>{const{type:n,vertical:o}=t;return e.createVNode("div",{class:me([n,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[e.createVNode("span",{class:me("spinner",n),style:l.value},["spinner"===n?he:ge]),i()])}}}));function ye(){const t=e.ref(0),n=e.ref(0),o=e.ref(0),l=e.ref(0),i=e.ref(0),a=e.ref(0),r=e.ref(""),c=()=>{o.value=0,l.value=0,i.value=0,a.value=0,r.value=""};return{move:e=>{const c=e.touches[0];o.value=(c.clientX<0?0:c.clientX)-t.value,l.value=c.clientY-n.value,i.value=Math.abs(o.value),a.value=Math.abs(l.value);var s,u;(!r.value||i.value<10&&a.value<10)&&(r.value=(s=i.value,u=a.value,s>u?"horizontal":u>s?"vertical":""))},start:e=>{c(),t.value=e.touches[0].clientX,n.value=e.touches[0].clientY},reset:c,startX:t,startY:n,deltaX:o,deltaY:l,offsetX:i,offsetY:a,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}const[xe,Ce]=ae("picker-column"),Ne=Symbol(xe),ke=e.defineComponent({name:xe,props:{value:m(),fields:f(Object),options:m(),readonly:Boolean,allowHtml:Boolean,optionHeight:f(Number),swipeDuration:f(v),visibleOptionNum:f(v)},components:{[t.Icon.name]:t.Icon},emits:["change","clickOption","clickIcon"],setup(t,{emit:n,slots:o}){let l,i,a,r,c;const s=e.ref(),u=e.ref(),d=e.ref(0),v=e.ref(0),p=ye(),f=()=>t.options.length,m=()=>t.optionHeight*(+t.visibleOptionNum-1)/2,h=e=>{const n=de(t.options,e),o=-n*t.optionHeight,i=()=>{t.options[n][t.fields.value]};l&&o!==d.value?c=i:i(),d.value=o},g=e=>U(Math.round(-e/t.optionHeight),0,f()-1),b=()=>{l=!1,v.value=0,c&&(c(),c=null)},w=e=>{if(!t.readonly){if(p.start(e),l){const e=function(e){const{transform:t}=window.getComputedStyle(e),n=t.slice(7,t.length-1).split(", ")[5];return Number(n)}(u.value);d.value=Math.min(0,e-m())}v.value=0,i=d.value,a=Date.now(),r=i,c=null}},y=()=>{if(t.readonly)return;const e=d.value-r,n=Date.now()-a;if(n<300&&Math.abs(e)>15)return void((e,n)=>{const o=Math.abs(e/n);e=d.value+o/.003*(e<0?-1:1);const l=g(e);v.value=+t.swipeDuration,h(l)})(e,n);const o=g(d.value);v.value=200,h(o),setTimeout((()=>{l=!1}),0)},x=()=>{const i={height:`${t.optionHeight}px`};return t.options.map(((a,r)=>{const s=a[t.fields.text],{disabled:u}=a,d=a[t.fields.value],p={role:"button",style:i,tabindex:u?-1:0,class:[Ce("item",{disabled:u,selected:t.value.includes(d)}),a.className],onClick:()=>(e=>{l||t.readonly||(c=null,v.value=200,n("clickOption",t.options[e]))})(r)},f={class:"van-ellipsis",[t.allowHtml?"innerHTML":"textContent"]:s},m={name:a.iconName||"success",class:[Ce("icon",{disabled:u,selected:t.value.includes(d)}),a.iconClassName],onClick:()=>(e=>{l||t.readonly||(c=null,v.value=200,h(e),n("clickIcon",t.options[e][t.fields.value],t.options[e]))})(r)};return e.createVNode("li",p,[o.option?o.option(a):e.createVNode("div",f,null),e.createVNode(e.resolveComponent("van-icon"),m,null)])}))};return V(Ne),pe({stopMomentum:b}),e.watchEffect((()=>{const e=t.options.findIndex((e=>e[t.fields.value]===t.value[t.value.length-1])),n=-de(t.options,e)*t.optionHeight;d.value=n})),B("touchmove",(e=>{if(t.readonly)return;p.move(e),p.isVertical()&&(l=!0,P(e,!0)),d.value=U(i+p.deltaY.value,-f()*t.optionHeight,t.optionHeight);const n=Date.now();n-a>300&&(a=n,r=d.value)}),{target:s}),()=>e.createVNode("div",{ref:s,class:Ce(),onTouchstartPassive:w,onTouchend:y,onTouchcancel:y},[e.createVNode("ul",{ref:u,style:{transform:`translate3d(0, ${d.value+m()}px, 0)`,transitionDuration:`${v.value}ms`,transitionProperty:v.value?"all":"none"},class:Ce("wrapper"),onTransitionend:b},[x()])])}}),[Ve]=ae("picker-toolbar"),Se={title:String,cancelButtonText:String,confirmButtonText:String},Te=["cancel","confirm","title","toolbar"],$e=Object.keys(Se),Be=e.defineComponent({name:Ve,props:Se,emits:["confirm","cancel"],setup(t,{emit:n,slots:o}){const l=()=>n("cancel"),i=()=>n("confirm"),a=()=>{const n=t.cancelButtonText||se("cancel");return e.createVNode("button",{type:"button",class:[ce("cancel"),"van-haptics-feedback"],onClick:l},[o.cancel?o.cancel():n])},r=()=>{const n=t.confirmButtonText||se("confirm");return e.createVNode("button",{type:"button",class:[ce("confirm"),"van-haptics-feedback"],onClick:i},[o.confirm?o.confirm():n])};return()=>e.createVNode("div",{class:ce("toolbar")},[o.toolbar?o.toolbar():[a(),o.title?o.title():t.title?e.createVNode("div",{class:[ce("title"),"van-ellipsis"]},[t.title]):void 0,r()]])}});let Oe=0;function Ie(){const t=e.getCurrentInstance(),{name:n="unknown"}=(null==t?void 0:t.type)||{};return"test"===process.env.NODE_ENV?n:`${n}-${++Oe}`}const ze={to:[String,Object],url:String,replace:Boolean};const Me=Symbol();function Ae(t){const n=e.inject(Me,null);n&&e.watch(n,(e=>{e&&t()}))}const[Ee,He]=oe("sticky"),De={zIndex:v,position:g("top"),container:Object,offsetTop:h(0),offsetBottom:h(0)};const Pe=ie(e.defineComponent({name:Ee,props:De,emits:["scroll","change"],setup(t,{emit:n,slots:o}){const l=e.ref(),i=A(l),a=e.reactive({fixed:!1,width:0,height:0,transform:0}),s=e.computed((()=>F("top"===t.position?t.offsetTop:t.offsetBottom))),u=e.computed((()=>{const{fixed:e,height:t,width:n}=a;if(e)return{width:`${n}px`,height:`${t}px`}})),d=e.computed((()=>{if(!a.fixed)return;const e=r(function(e){const t={};return void 0!==e&&(t.zIndex=+e),t}(t.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[t.position]:`${s.value}px`});return a.transform&&(e.transform=`translate3d(0, ${a.transform}px, 0)`),e})),v=()=>{if(!l.value||R(l))return;const{container:e,position:o}=t,i=k(l),r=E(window);if(a.width=i.width,a.height=i.height,"top"===o)if(e){const t=k(e),n=t.bottom-s.value-a.height;a.fixed=s.value>i.top&&t.bottom>0,a.transform=n<0?n:0}else a.fixed=s.value>i.top;else{const{clientHeight:t}=document.documentElement;if(e){const n=k(e),o=t-n.top-s.value-a.height;a.fixed=t-s.value<i.bottom&&t>n.top,a.transform=o<0?-o:0}else a.fixed=t-s.value<i.bottom}(e=>{n("scroll",{scrollTop:e,isFixed:a.fixed})})(r)};return e.watch((()=>a.fixed),(e=>n("change",e))),B("scroll",v,{target:i,passive:!0}),function(t,n){if(!c||!window.IntersectionObserver)return;const o=new IntersectionObserver((e=>{n(e[0].intersectionRatio>0)}),{root:document.body}),l=()=>{t.value&&o.unobserve(t.value)};e.onDeactivated(l),e.onBeforeUnmount(l),$((()=>{t.value&&o.observe(t.value)}))}(l,v),()=>{var t;return e.createVNode("div",{ref:l,style:u.value},[e.createVNode("div",{class:He({fixed:a.fixed}),style:d.value},[null==(t=o.default)?void 0:t.call(o)])])}}})),[Re,Le]=oe("badge"),je={dot:Boolean,max:v,tag:g("div"),color:String,offset:Array,content:v,showZero:p,position:g("top-right")};const Ye=ie(e.defineComponent({name:Re,props:je,setup(t,{slots:o}){const l=()=>{if(o.content)return!0;const{content:e,showZero:l}=t;return n(e)&&""!==e&&(l||0!==e&&"0"!==e)},a=()=>{const{dot:e,max:a,content:r}=t;if(!e&&l())return o.content?o.content():n(a)&&i(r)&&+r>a?`${a}+`:r},r=e.computed((()=>{const e={background:t.color};if(t.offset){const[n,l]=t.offset;o.default?(e.top=Y(l),e.right="number"==typeof n?Y(-n):n.startsWith("-")?n.replace("-",""):`-${n}`):(e.marginTop=Y(l),e.marginLeft=Y(n))}return e})),c=()=>{if(l()||t.dot)return e.createVNode("div",{class:Le([t.position,{dot:t.dot,fixed:!!o.default}]),style:r.value},[a()])};return()=>{if(o.default){const{tag:n}=t;return e.createVNode(n,{class:Le("wrapper")},{default:()=>[o.default(),c()]})}return c()}}})),[Xe,We]=oe("tab");var Fe=e.defineComponent({name:Xe,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:v,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:p},setup(t,{slots:o}){const l=e.computed((()=>{const e={},{type:n,color:o,disabled:l,isActive:i,activeColor:a,inactiveColor:r}=t;o&&"card"===n&&(e.borderColor=o,l||(i?e.backgroundColor=o:e.color=o));const c=i?a:r;return c&&(e.color=c),e})),i=()=>{const l=e.createVNode("span",{class:We("text",{ellipsis:!t.scrollable})},[o.title?o.title():t.title]);return t.dot||n(t.badge)&&""!==t.badge?e.createVNode(Ye,{dot:t.dot,content:t.badge,showZero:t.showZeroBadge},{default:()=>[l]}):l};return()=>e.createVNode("div",{id:t.id,role:"tab",class:[We([t.type,{grow:t.scrollable&&!t.shrink,shrink:t.shrink,active:t.isActive,disabled:t.disabled}])],style:l.value,tabindex:t.disabled?void 0:t.isActive?0:-1,"aria-selected":t.isActive,"aria-disabled":t.disabled||void 0,"aria-controls":t.controls},[i()])}});const[Ze,_e]=oe("swipe"),Ue={loop:p,width:v,height:v,vertical:Boolean,autoplay:h(0),duration:h(500),touchable:p,lazyRender:Boolean,initialSwipe:h(0),indicatorColor:String,showIndicators:p,stopPropagation:p},qe=Symbol(Ze);const Je=ie(e.defineComponent({name:Ze,props:Ue,emits:["change"],setup(t,{emit:n,slots:o}){const l=e.ref(),i=e.ref(),a=e.reactive({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),r=ye(),{children:c,linkChildren:s}=T(qe),u=e.computed((()=>c.length)),d=e.computed((()=>a[t.vertical?"height":"width"])),v=e.computed((()=>t.vertical?r.deltaY.value:r.deltaX.value)),p=e.computed((()=>{if(a.rect){return(t.vertical?a.rect.height:a.rect.width)-d.value*u.value}return 0})),f=e.computed((()=>Math.ceil(Math.abs(p.value)/d.value))),m=e.computed((()=>u.value*d.value)),h=e.computed((()=>(a.active+u.value)%u.value)),g=e.computed((()=>{const e=t.vertical?"vertical":"horizontal";return r.direction.value===e})),w=e.computed((()=>{const e={transitionDuration:`${a.swiping?0:t.duration}ms`,transform:`translate${t.vertical?"Y":"X"}(${a.offset}px)`};if(d.value){const n=t.vertical?"height":"width",o=t.vertical?"width":"height";e[n]=`${m.value}px`,e[o]=t[o]?`${t[o]}px`:""}return e})),x=(e,n=0)=>{let o=e*d.value;t.loop||(o=Math.min(o,-p.value));let l=n-o;return t.loop||(l=U(l,p.value,0)),l},C=({pace:e=0,offset:o=0,emitChange:l})=>{if(u.value<=1)return;const{active:i}=a,r=(e=>{const{active:n}=a;return e?t.loop?U(n+e,-1,u.value):U(n+e,0,f.value):n})(e),s=x(r,o);if(t.loop){if(c[0]&&s!==p.value){const e=s<p.value;c[0].setOffset(e?m.value:0)}if(c[u.value-1]&&0!==s){const e=s>0;c[u.value-1].setOffset(e?-m.value:0)}}a.active=r,a.offset=s,l&&r!==i&&n("change",h.value)},N=()=>{a.swiping=!0,a.active<=-1?C({pace:u.value}):a.active>=u.value&&C({pace:-u.value})},k=()=>{N(),r.reset(),y((()=>{a.swiping=!1,C({pace:1,emitChange:!0})}))};let V;const S=()=>clearTimeout(V),$=()=>{S(),t.autoplay>0&&u.value>1&&(V=setTimeout((()=>{k(),$()}),+t.autoplay))},I=(n=+t.initialSwipe)=>{if(!l.value)return;const o=()=>{var e,o;if(!R(l)){const n={width:l.value.offsetWidth,height:l.value.offsetHeight};a.rect=n,a.width=+(null!=(e=t.width)?e:n.width),a.height=+(null!=(o=t.height)?o:n.height)}u.value&&(n=Math.min(u.value-1,n)),a.active=n,a.swiping=!0,a.offset=x(n),c.forEach((e=>{e.setOffset(0)})),$()};R(l)?e.nextTick().then(o):o()},z=()=>I(a.active);let M;const A=e=>{t.touchable&&(r.start(e),M=Date.now(),S(),N())},E=()=>{if(!t.touchable||!a.swiping)return;const e=Date.now()-M,n=v.value/e;if((Math.abs(n)>.25||Math.abs(v.value)>d.value/2)&&g.value){const e=t.vertical?r.offsetY.value:r.offsetX.value;let n=0;n=t.loop?e>0?v.value>0?-1:1:0:-Math[v.value>0?"ceil":"floor"](v.value/d.value),C({pace:n,emitChange:!0})}else v.value&&C({pace:0});a.swiping=!1,$()},H=(n,o)=>{const l=o===h.value,i=l?{backgroundColor:t.indicatorColor}:void 0;return e.createVNode("i",{style:i,class:_e("indicator",{active:l})},null)};return pe({prev:()=>{N(),r.reset(),y((()=>{a.swiping=!1,C({pace:-1,emitChange:!0})}))},next:k,state:a,resize:z,swipeTo:(e,n={})=>{N(),r.reset(),y((()=>{let o;o=t.loop&&e===u.value?0===a.active?0:e:e%u.value,n.immediate?y((()=>{a.swiping=!1})):a.swiping=!1,C({pace:o-a.active,emitChange:!0})}))}}),s({size:d,props:t,count:u,activeIndicator:h}),e.watch((()=>t.initialSwipe),(e=>I(+e))),e.watch(u,(()=>I(a.active))),e.watch((()=>t.autoplay),$),e.watch([L,j],z),e.watch(function(){if(!O&&(O=e.ref("visible"),b)){const e=()=>{O.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return O}(),(e=>{"visible"===e?$():S()})),e.onMounted(I),e.onActivated((()=>I(a.active))),Ae((()=>I(a.active))),e.onDeactivated(S),e.onBeforeUnmount(S),B("touchmove",(e=>{if(t.touchable&&a.swiping&&(r.move(e),g.value)){!t.loop&&(0===a.active&&v.value>0||a.active===u.value-1&&v.value<0)||(P(e,t.stopPropagation),C({offset:v.value}))}}),{target:i}),()=>{var n;return e.createVNode("div",{ref:l,class:_e()},[e.createVNode("div",{ref:i,style:w.value,class:_e("track",{vertical:t.vertical}),onTouchstartPassive:A,onTouchend:E,onTouchcancel:E},[null==(n=o.default)?void 0:n.call(o)]),o.indicator?o.indicator({active:h.value,total:u.value}):t.showIndicators&&u.value>1?e.createVNode("div",{class:_e("indicators",{vertical:t.vertical})},[Array(u.value).fill("").map(H)]):void 0])}}})),[Ge,Ke]=oe("tabs");var Qe=e.defineComponent({name:Ge,props:{count:f(Number),inited:Boolean,animated:Boolean,duration:f(v),swipeable:Boolean,lazyRender:Boolean,currentIndex:f(Number)},emits:["change"],setup(t,{emit:n,slots:o}){const l=e.ref(),i=e=>n("change",e),a=()=>{var n;const a=null==(n=o.default)?void 0:n.call(o);return t.animated||t.swipeable?e.createVNode(Je,{ref:l,loop:!1,class:Ke("track"),duration:1e3*+t.duration,touchable:t.swipeable,lazyRender:t.lazyRender,showIndicators:!1,onChange:i},{default:()=>[a]}):a},r=e=>{const n=l.value;n&&n.state.active!==e&&n.swipeTo(e,{immediate:!t.inited})};return e.watch((()=>t.currentIndex),r),e.onMounted((()=>{r(t.currentIndex)})),pe({swipeRef:l}),()=>e.createVNode("div",{class:Ke("content",{animated:t.animated||t.swipeable})},[a()])}});const[et,tt]=oe("tabs"),nt={type:g("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:h(0),duration:h(.3),animated:Boolean,ellipsis:p,swipeable:Boolean,scrollspy:Boolean,offsetTop:h(0),background:String,lazyRender:p,lineWidth:v,lineHeight:v,beforeChange:Function,swipeThreshold:h(5),titleActiveColor:String,titleInactiveColor:String},ot=Symbol(et);var lt=e.defineComponent({name:et,props:nt,emits:["change","scroll","rendered","clickTab","update:active"],setup(t,{emit:o,slots:l}){let i,a,r;const c=e.ref(),s=e.ref(),d=e.ref(),v=e.ref(),p=Ie(),f=A(c),[m,h]=function(){const t=e.ref([]),n=[];return e.onBeforeUpdate((()=>{t.value=[]})),[t,e=>(n[e]||(n[e]=n=>{t.value[e]=n}),n[e])]}(),{children:g,linkChildren:b}=T(ot),y=e.reactive({inited:!1,position:"",lineStyle:{},currentIndex:-1}),x=e.computed((()=>g.length>t.swipeThreshold||!t.ellipsis||t.shrink)),C=e.computed((()=>({borderColor:t.color,background:t.background}))),N=(e,t)=>{var n;return null!=(n=e.name)?n:t},V=e.computed((()=>{const e=g[y.currentIndex];if(e)return N(e,y.currentIndex)})),S=e.computed((()=>F(t.offsetTop))),O=e.computed((()=>t.sticky?S.value+i:0)),I=e=>{const n=s.value,o=m.value;if(!(x.value&&n&&o&&o[y.currentIndex]))return;const l=o[y.currentIndex].$el;!function(e,t,n){let o=0;const l=e.scrollLeft,i=0===n?1:Math.round(1e3*n/16);!function n(){e.scrollLeft+=(t-l)/i,++o<i&&w(n)}()}(n,l.offsetLeft-(n.offsetWidth-l.offsetWidth)/2,e?0:+t.duration)},z=()=>{const o=y.inited;e.nextTick((()=>{const e=m.value;if(!e||!e[y.currentIndex]||"line"!==t.type||R(c.value))return;const l=e[y.currentIndex].$el,{lineWidth:i,lineHeight:a}=t,r=l.offsetLeft+l.offsetWidth/2,s={width:Y(i),backgroundColor:t.color,transform:`translateX(${r}px) translateX(-50%)`};if(o&&(s.transitionDuration=`${t.duration}s`),n(a)){const e=Y(a);s.height=e,s.borderRadius=e}y.lineStyle=s}))},M=(e,l)=>{const i=(e=>{const t=e<y.currentIndex?-1:1;for(;e>=0&&e<g.length;){if(!g[e].disabled)return e;e+=t}})(e);if(!n(i))return;const a=g[i],s=N(a,i),u=null!==y.currentIndex;var d;y.currentIndex=i,s!==t.active&&(o("update:active",s),u&&o("change",s,a.title)),l||I(),z(),r&&!t.scrollspy&&(d=Math.ceil(D(c.value)-S.value),H(window,d),H(document.body,d))},P=(e,t)=>{const n=g.find(((t,n)=>N(t,n)===e)),o=n?g.indexOf(n):0;M(o,t)},j=(e=!1)=>{if(t.scrollspy){const n=g[y.currentIndex].$el;if(n&&f.value){const o=D(n,f.value)-O.value;a=!0,function(e,t,n,o){let l=E(e);const i=l<t,a=0===n?1:Math.round(1e3*n/16),r=(t-l)/a;!function n(){l+=r,(i&&l>t||!i&&l<t)&&(l=t),H(e,l),i&&l<t||!i&&l>t?w(n):o&&w(o)}()}(f.value,o,e?0:+t.duration,(()=>{a=!1}))}}},X=(e,n,l)=>{const{title:i,disabled:a}=g[n],r=N(g[n],n);a||(le(t.beforeChange,{args:[r],done:()=>{M(n),j()}}),function({to:e,url:t,replace:n,$router:o}){e&&o?o[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}(e)),o("clickTab",{name:r,title:i,event:l,disabled:a})},W=e=>{r=e.isFixed,o("scroll",e)},Z=()=>{if("line"===t.type&&g.length)return e.createVNode("div",{class:tt("line"),style:y.lineStyle},null)},_=()=>{var n,o;const{type:i,border:a}=t;return e.createVNode("div",{ref:d,class:[tt("wrap"),{"van-hairline--top-bottom":"line"===i&&a}]},[e.createVNode("div",{ref:s,role:"tablist",class:tt("nav",[i,{shrink:t.shrink,complete:x.value}]),style:C.value,"aria-orientation":"horizontal"},[null==(n=l["nav-left"])?void 0:n.call(l),g.map(((n,o)=>e.createVNode(Fe,e.mergeProps({key:n.id,id:`${p}-${o}`,ref:h(o),type:t.type,color:t.color,style:n.titleStyle,class:n.titleClass,shrink:t.shrink,isActive:o===y.currentIndex,controls:n.id,scrollable:x.value,activeColor:t.titleActiveColor,inactiveColor:t.titleInactiveColor,onClick:e=>X(n,o,e)},u(n,["dot","badge","title","disabled","showZeroBadge"])),{title:n.$slots.title}))),Z(),null==(o=l["nav-right"])?void 0:o.call(l)])])};e.watch([()=>t.color,L],z),e.watch((()=>t.active),(e=>{e!==V.value&&P(e)})),e.watch((()=>g.length),(()=>{y.inited&&(P(t.active),z(),e.nextTick((()=>{I(!0)})))}));return pe({resize:()=>{z(),e.nextTick((()=>{var e,t;return null==(t=null==(e=v.value)?void 0:e.swipeRef.value)?void 0:t.resize()}))},scrollTo:t=>{e.nextTick((()=>{P(t),j(!0)}))}}),e.onActivated(z),Ae(z),$((()=>{P(t.active,!0),e.nextTick((()=>{y.inited=!0,d.value&&(i=k(d.value).height),I(!0)}))})),B("scroll",(()=>{if(t.scrollspy&&!a){const e=(()=>{for(let e=0;e<g.length;e++){const{top:t}=k(g[e].$el);if(t>O.value)return 0===e?0:e-1}return g.length-1})();M(e)}}),{target:f,passive:!0}),b({id:p,props:t,setLine:z,onRendered:(e,t)=>o("rendered",e,t),currentName:V,scrollIntoView:I}),()=>{var n;return e.createVNode("div",{ref:c,class:tt([t.type])},[t.sticky?e.createVNode(Pe,{container:c.value,offsetTop:S.value,onScroll:W},{default:()=>{var e;return[_(),null==(e=l["nav-bottom"])?void 0:e.call(l)]}}):[_(),null==(n=l["nav-bottom"])?void 0:n.call(l)],e.createVNode(Qe,{ref:v,count:g.length,inited:y.inited,animated:t.animated,duration:t.duration,swipeable:t.swipeable,lazyRender:t.lazyRender,currentIndex:y.currentIndex,onChange:M},{default:()=>{var e;return[null==(e=l.default)?void 0:e.call(l)]}})])}}});const it=Symbol(),[at,rt]=oe("swipe-item");const ct=ie(e.defineComponent({name:at,setup(t,{slots:n}){let o;const l=e.reactive({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=V(qe);if(!i)return void process.env.NODE_ENV;const r=e.computed((()=>{const e={},{vertical:t}=i.props;return i.size.value&&(e[t?"height":"width"]=`${i.size.value}px`),l.offset&&(e.transform=`translate${t?"Y":"X"}(${l.offset}px)`),e})),c=e.computed((()=>{const{loop:e,lazyRender:t}=i.props;if(!t||o)return!0;if(!l.mounted)return!1;const n=i.activeIndicator.value,r=i.count.value-1,c=0===n&&e?r:n-1,s=n===r&&e?0:n+1;return o=a.value===n||a.value===c||a.value===s,o}));return e.onMounted((()=>{e.nextTick((()=>{l.mounted=!0}))})),pe({setOffset:e=>{l.offset=e}}),()=>{var t;return e.createVNode("div",{class:rt(),style:r.value},[c.value?null==(t=n.default)?void 0:t.call(n):null])}}})),[st,ut]=oe("tab"),dt=r({},ze,{dot:Boolean,name:v,badge:v,title:String,disabled:Boolean,titleClass:null,titleStyle:[String,Object],showZeroBadge:p});const vt=ie(e.defineComponent({name:st,props:dt,setup(t,{slots:n}){const o=Ie(),l=e.ref(!1),{parent:i,index:a}=V(ot);if(!i)return void process.env.NODE_ENV;const r=()=>{var e;return null!=(e=t.name)?e:a.value},c=e.computed((()=>{const n=r()===i.currentName.value;return n&&!l.value&&(l.value=!0,i.props.lazyRender&&e.nextTick((()=>{i.onRendered(r(),t.title)}))),n})),s=e.ref(!c.value);return e.watch(c,(e=>{e?s.value=!1:y((()=>{s.value=!0}))})),e.watch((()=>t.title),(()=>{i.setLine(),i.scrollIntoView()})),e.provide(it,c),()=>{var t;const r=`${i.id}-${a.value}`,{animated:u,swipeable:d,scrollspy:v,lazyRender:p}=i.props;if(!n.default&&!u)return;const f=v||c.value;if(u||d)return e.createVNode(ct,{id:o,role:"tabpanel",class:ut("panel-wrapper",{inactive:s.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":r},{default:()=>{var t;return[e.createVNode("div",{class:ut("panel")},[null==(t=n.default)?void 0:t.call(n)])]}});const m=l.value||v||!p?null==(t=n.default)?void 0:t.call(n):null;return pe({id:o}),e.withDirectives(e.createVNode("div",{id:o,role:"tabpanel",class:ut("panel"),tabindex:f?0:-1,"aria-labelledby":r},[m]),[[e.vShow,f]])}}})),pt=ie(lt),[ft,mt,ht]=oe("picker"),[gt]=oe("picker-toolbar"),bt={title:String,cancelButtonText:String,confirmButtonText:String};var wt=e.defineComponent({name:gt,props:bt,emits:["confirm","cancel"],setup(t,{emit:n,slots:o}){const l=()=>n("cancel"),i=()=>n("confirm"),a=()=>{const n=t.cancelButtonText||ht("cancel");return e.createVNode("button",{type:"button",class:[mt("cancel"),"van-haptics-feedback"],onClick:l},[o.cancel?o.cancel():n])},r=()=>{const n=t.confirmButtonText||ht("confirm");return e.createVNode("button",{type:"button",class:[mt("confirm"),"van-haptics-feedback"],onClick:i},[o.confirm?o.confirm():n])};return()=>e.createVNode("div",{class:mt("toolbar")},[o.toolbar?o.toolbar():[a(),o.title?o.title():t.title?e.createVNode("div",{class:[mt("title"),"van-ellipsis"]},[t.title]):void 0,r()]])}});const[yt,xt]=oe("picker-group"),Ct=Symbol(yt),Nt=r({tabs:m()},bt);e.defineComponent({name:yt,props:Nt,emits:["confirm","cancel"],setup(t,{emit:n,slots:o}){const{children:l,linkChildren:i}=T(Ct);i();const a=()=>{n("confirm",l.map((e=>e.confirm())))},r=()=>n("cancel");return()=>{var n;const l=null==(n=o.default)?void 0:n.call(o);return e.createVNode("div",{class:xt()},[e.createVNode(wt,e.mergeProps(t,{onConfirm:a,onCancel:r}),null),e.createVNode(pt,{shrink:!0,class:xt("tabs"),animated:!0},{default:()=>[t.tabs.map(((t,n)=>e.createVNode(vt,{title:t,titleClass:xt("tab-title")},{default:()=>[null==l?void 0:l[n]]})))]})])}}});const kt=r({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:h(44),showToolbar:p,swipeDuration:h(1e3),visibleOptionNum:h(6)},Se),Vt=r({},kt,{columns:m(),modelValue:m(),toolbarPosition:g("top"),columnsFieldNames:Object}),St=ie(e.defineComponent({name:"BetterVantPicker",props:Vt,emits:["confirm","cancel","clickOption","clickIcon","update:modelValue"],setup(t,{emit:o,slots:l}){const i=e.ref(),a=e.ref(t.modelValue.slice(0)),{parent:c}=V(Ct),{children:s,linkChildren:v}=T(Ne);v();const p=e.computed((()=>function(e){return r({text:"text",value:"value",children:"children"},e)}(t.columnsFieldNames))),f=e.computed((()=>F(t.optionHeight))),m=e.computed((()=>function(e,t){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(t.children in n)return"cascade"}return"default"}(t.columns,p.value))),h=e.computed((()=>{const{columns:e}=t;switch(m.value){case"multiple":return e;case"cascade":return function(e,t,o){const l=[];let i={[t.children]:e},a=0;for(;i&&i[t.children];){const e=i[t.children],r=o.value[a];i=n(r)?ve(e,r,t):void 0,!i&&e.length&&(i=ve(e,ue(e)[t.value],t)),a++,l.push(e)}return l}(e,p.value,a);default:return[e]}})),g=e.computed((()=>h.value.some((e=>e.length)))),b=e.computed((()=>h.value.map(((e,t)=>ve(e,a.value[t],p.value))))),w=(e,t)=>{if(a.value.includes(t)){if(a.value.findIndex((e=>e===t))>=0){const e=a.value.slice(0);a.value=e.filter((e=>e!==t))}}else{const e=a.value.slice(0);e.push(t),a.value=e}},y=()=>({selectedValues:a.value.slice(0),selectedOptions:b.value}),x=()=>{s.forEach((e=>e.stopMomentum()));const e=y();return o("confirm",e),e},C=()=>o("cancel",y()),N=()=>h.value.map(((n,i)=>e.createVNode(ke,{value:a.value,fields:p.value,options:n,readonly:t.readonly,allowHtml:t.allowHtml,optionHeight:f.value,swipeDuration:t.swipeDuration,visibleOptionNum:t.visibleOptionNum,onClickOption:e=>((e,t)=>o("clickOption",r({columnIndex:t,currentOption:e},y())))(e,i),onClickIcon:(e,t)=>((e,t,n)=>{w(0,e),o("clickIcon",r({columnIndex:n,currentOption:t},y()))})(e,t,i)},{option:l.option}))),k=t=>{if(g.value){const n={height:`${f.value}px`},o={backgroundSize:`100% ${(t-f.value)/2}px`};return[e.createVNode("div",{class:ce("mask"),style:o},null),e.createVNode("div",{class:["van-hairline-unset--top-bottom",ce("frame")],style:n},null)]}},S=()=>{const n=f.value*+t.visibleOptionNum,o={height:`${n}px`};return e.createVNode("div",{ref:i,class:ce("columns"),style:o},[N(),k(n)])},$=()=>{if(t.showToolbar&&!c)return e.createVNode(Be,e.mergeProps(u(t,$e),{onConfirm:x,onCancel:C}),u(l,Te))};let O;e.watch(h,(e=>{e.forEach(((e,t)=>{e.length&&!((e,t,n)=>void 0!==t&&!!e.find((e=>e[n.value]===t)))(e,a.value[t],p.value)&&w(0,ue(e)[p.value.value])}))}),{immediate:!0}),e.watch((()=>t.modelValue),(e=>{d(e,a.value)||d(e,O)||(a.value=e.slice(0))}),{deep:!0}),e.watch(a,(e=>{d(e,t.modelValue)||(O=e.slice(0),o("update:modelValue",O))}),{immediate:!0}),B("touchmove",P,{target:i});return pe({confirm:x,getSelectedOptions:()=>b.value}),()=>{var n,o;return e.createVNode("div",{class:ce()},["top"===t.toolbarPosition?$():null,t.loading?e.createVNode(we,{class:ce("loading")},null):null,null==(n=l["columns-top"])?void 0:n.call(l),S(),null==(o=l["columns-bottom"])?void 0:o.call(l),"bottom"===t.toolbarPosition?$():null])}}})),Tt={install(e){e.component(St.name,St)}};exports.BetterPicker=St,exports.default=Tt;
