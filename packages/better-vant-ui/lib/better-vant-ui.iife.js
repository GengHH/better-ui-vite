var BetterVantUI=function(e,t,n){"use strict";var o=document.createElement("style");o.innerHTML=":root{--van-picker-icon-color: var(--van-primary-color)}.van-picker-column__icon{padding-left:10px}.van-picker-column__icon--selected{color:var(--van-picker-icon-color)}\n",document.head.appendChild(o);const l=e=>null!=e,i=e=>"function"==typeof e,a=e=>null!==e&&"object"==typeof e,r=e=>"number"==typeof e||/^\d+(\.\d+)?$/.test(e);function c(){}const s=Object.assign,u="undefined"!=typeof window;function d(e,t){const n=t.split(".");let o=e;return n.forEach((e=>{var t;o=a(o)&&null!=(t=o[e])?t:""})),o}function v(e,t,n){return t.reduce(((t,o)=>(n&&void 0===e[o]||(t[o]=e[o]),t)),{})}const p=(e,t)=>JSON.stringify(e)===JSON.stringify(t),f=[Number,String],m={type:Boolean,default:!0},h=e=>({type:e,required:!0}),g=()=>({type:Array,default:()=>[]}),b=e=>({type:f,default:e}),w=e=>({type:String,default:e});var y="undefined"!=typeof window;function x(e){return y?requestAnimationFrame(e):-1}function C(e){x((()=>x(e)))}var N,k,V=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),S=e=>{const n=t.unref(e);if(n===window){const e=n.innerWidth,t=n.innerHeight;return V(e,t)}return(null==n?void 0:n.getBoundingClientRect)?n.getBoundingClientRect():V(0,0)};function T(e){const n=t.inject(e,null);if(n){const e=t.getCurrentInstance(),{link:o,unlink:l,internalChildren:i}=n;o(e),t.onUnmounted((()=>l(e)));return{parent:n,index:t.computed((()=>i.indexOf(e)))}}return{parent:null,index:t.ref(-1)}}function $(e,n,o){const l=function(e){const n=[],o=e=>{Array.isArray(e)&&e.forEach((e=>{var l;t.isVNode(e)&&(n.push(e),(null==(l=e.component)?void 0:l.subTree)&&(n.push(e.component.subTree),o(e.component.subTree.children)),e.children&&o(e.children))}))};return o(e),n}(e.subTree.children);o.sort(((e,t)=>l.indexOf(e.vnode)-l.indexOf(t.vnode)));const i=o.map((e=>e.proxy));n.sort(((e,t)=>i.indexOf(e)-i.indexOf(t)))}function B(e){const n=t.reactive([]),o=t.reactive([]),l=t.getCurrentInstance();return{children:n,linkChildren:i=>{t.provide(e,Object.assign({link:e=>{e.proxy&&(o.push(e),n.push(e.proxy),$(l,n,o))},unlink:e=>{const t=o.indexOf(e);n.splice(t,1),o.splice(t,1)},children:n,internalChildren:o},i))}}}function O(e){let n;t.onMounted((()=>{e(),t.nextTick((()=>{n=!0}))})),t.onActivated((()=>{n&&e()}))}function I(e,n,o={}){if(!y)return;const{target:l=window,passive:i=!1,capture:a=!1}=o;let r;const c=o=>{const l=t.unref(o);l&&!r&&(l.addEventListener(e,n,{capture:a,passive:i}),r=!0)},s=o=>{const l=t.unref(o);l&&r&&(l.removeEventListener(e,n,a),r=!1)};t.onUnmounted((()=>s(l))),t.onDeactivated((()=>s(l))),O((()=>c(l))),t.isRef(l)&&t.watch(l,((e,t)=>{s(t),c(e)}))}var z,M=/scroll|auto|overlay/i,A=y?window:void 0;function E(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function H(e,n=A){const o=t.ref();return t.onMounted((()=>{e.value&&(o.value=function(e,t=A){let n=e;for(;n&&n!==t&&E(n);){const{overflowY:e}=window.getComputedStyle(n);if(M.test(e))return n;n=n.parentNode}return t}(e.value,n))})),o}function D(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function P(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function R(e,t){if(e===window)return 0;const n=t?D(t):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;return S(e).top+n}u&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function L(e,t){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&(e=>{e.stopPropagation()})(e)}function j(e){const n=t.unref(e);if(!n)return!1;const o=window.getComputedStyle(n),l="none"===o.display,i=null===n.offsetParent&&"fixed"!==o.position;return l||i}const{width:Y,height:X}=function(){if(!N&&(N=t.ref(0),k=t.ref(0),y)){const e=()=>{N.value=window.innerWidth,k.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:N,height:k}}();function _(e){if(l(e))return r(e)?`${e}px`:String(e)}let W;function F(e){return+(e=e.replace(/rem/g,""))*function(){if(!W){const e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;W=parseFloat(t)}return W}()}function U(e){if("number"==typeof e)return e;if(u){if(e.includes("rem"))return F(e);if(e.includes("vw"))return function(e){return+(e=e.replace(/vw/g,""))*Y.value/100}(e);if(e.includes("vh"))return function(e){return+(e=e.replace(/vh/g,""))*X.value/100}(e)}return parseFloat(e)}const Z=/-(\w)/g,q=e=>e.replace(Z,((e,t)=>t.toUpperCase())),J=(e,t,n)=>Math.min(Math.max(e,t),n),{hasOwnProperty:G}=Object.prototype;function K(e,t){return Object.keys(t).forEach((n=>{!function(e,t,n){const o=t[n];l(o)&&(G.call(e,n)&&a(o)?e[n]=K(Object(e[n]),o):e[n]=o)}(e,t,n)})),e}const Q=t.ref("zh-CN"),ee=t.reactive({"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}}});var te={messages:()=>ee[Q.value],use(e,t){Q.value=e,this.add({[e]:t})},add(e={}){K(ee,e)}};function ne(e){const t=q(e)+".";return(e,...n)=>{const o=te.messages(),l=d(o,t+e)||d(o,e);return i(l)?l(...n):l}}function oe(e,t){return t?"string"==typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,n)=>t+oe(e,n)),""):Object.keys(t).reduce(((n,o)=>n+(t[o]?oe(e,o):"")),""):""}function le(e){return(t,n)=>(t&&"string"!=typeof t&&(n=t,t=""),`${t=t?`${e}__${t}`:e}${oe(t,n)}`)}function ie(e){const t=`van-${e}`;return[t,le(t),ne(t)]}const ae="van-hairline",re=`${ae}--top-bottom`,ce=`${ae}-unset--top-bottom`,se="van-haptics-feedback";function ue(e,{args:t=[],done:n,canceled:o}){if(e){const r=e.apply(null,t);a(l=r)&&i(l.then)&&i(l.catch)?r.then((e=>{e?n():o&&o()})).catch(c):r?n():o&&o()}else n();var l}function de(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(q(`-${n}`),e))},e}function ve(e){const t=`van-${e}`;return[t,le(t),ne(t)]}const[pe,fe,me]=ve("picker"),he=e=>e.find((e=>!e.disabled))||e[0];function ge(e,t){for(let n=t=J(t,0,e.length);n<e.length;n++)if(!e[n].disabled)return n;for(let n=t-1;n>=0;n--)if(!e[n].disabled)return n;return 0}function be(e,t,n){const o=e.findIndex((e=>e[n.value]===t));return e[ge(e,o)]}function we(e){const n=t.getCurrentInstance();n&&s(n.proxy,e)}const[ye,xe]=ie("loading"),Ce=Array(12).fill(null).map(((e,n)=>t.createVNode("i",{class:xe("line",String(n+1))},null))),Ne=t.createVNode("svg",{class:xe("circular"),viewBox:"25 25 50 50"},[t.createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),ke={size:f,type:w("circular"),color:String,vertical:Boolean,textSize:f,textColor:String};const Ve=de(t.defineComponent({name:ye,props:ke,setup(e,{slots:n}){const o=t.computed((()=>s({color:e.color},function(e){if(l(e)){if(Array.isArray(e))return{width:_(e[0]),height:_(e[1])};const t=_(e);return{width:t,height:t}}}(e.size)))),i=()=>{var o;if(n.default)return t.createVNode("span",{class:xe("text"),style:{fontSize:_(e.textSize),color:null!=(o=e.textColor)?o:e.color}},[n.default()])};return()=>{const{type:n,vertical:l}=e;return t.createVNode("div",{class:xe([n,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[t.createVNode("span",{class:xe("spinner",n),style:o.value},["spinner"===n?Ce:Ne]),i()])}}}));function Se(){const e=t.ref(0),n=t.ref(0),o=t.ref(0),l=t.ref(0),i=t.ref(0),a=t.ref(0),r=t.ref(""),c=()=>{o.value=0,l.value=0,i.value=0,a.value=0,r.value=""};return{move:t=>{const c=t.touches[0];o.value=(c.clientX<0?0:c.clientX)-e.value,l.value=c.clientY-n.value,i.value=Math.abs(o.value),a.value=Math.abs(l.value);var s,u;(!r.value||i.value<10&&a.value<10)&&(r.value=(s=i.value,u=a.value,s>u?"horizontal":u>s?"vertical":""))},start:t=>{c(),e.value=t.touches[0].clientX,n.value=t.touches[0].clientY},reset:c,startX:e,startY:n,deltaX:o,deltaY:l,offsetX:i,offsetY:a,direction:r,isVertical:()=>"vertical"===r.value,isHorizontal:()=>"horizontal"===r.value}}const[Te,$e]=ve("picker-column"),Be=Symbol(Te),Oe=t.defineComponent({name:Te,props:{value:g(),fields:h(Object),options:g(),readonly:Boolean,allowHtml:Boolean,optionHeight:h(Number),swipeDuration:h(f),visibleOptionNum:h(f)},components:{[n.Icon.name]:n.Icon},emits:["change","clickOption","clickIcon"],setup(e,{emit:n,slots:o}){let l,i,a,r,c;const s=t.ref(),u=t.ref(),d=t.ref(0),v=t.ref(0),p=Se(),f=()=>e.options.length,m=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,h=t=>{const n=ge(e.options,t),o=-n*e.optionHeight,i=()=>{e.options[n][e.fields.value]};l&&o!==d.value?c=i:i(),d.value=o},g=t=>J(Math.round(-t/e.optionHeight),0,f()-1),b=()=>{l=!1,v.value=0,c&&(c(),c=null)},w=t=>{if(!e.readonly){if(p.start(t),l){const e=function(e){const{transform:t}=window.getComputedStyle(e),n=t.slice(7,t.length-1).split(", ")[5];return Number(n)}(u.value);d.value=Math.min(0,e-m())}v.value=0,i=d.value,a=Date.now(),r=i,c=null}},y=()=>{if(e.readonly)return;const t=d.value-r,n=Date.now()-a;if(n<300&&Math.abs(t)>15)return void((t,n)=>{const o=Math.abs(t/n);t=d.value+o/.003*(t<0?-1:1);const l=g(t);v.value=+e.swipeDuration,h(l)})(t,n);const o=g(d.value);v.value=200,h(o),setTimeout((()=>{l=!1}),0)},x=()=>{const i={height:`${e.optionHeight}px`};return e.options.map(((a,r)=>{const s=a[e.fields.text],{disabled:u}=a,d=a[e.fields.value],p={role:"button",style:i,tabindex:u?-1:0,class:[$e("item",{disabled:u,selected:e.value.includes(d)}),a.className],onClick:()=>(t=>{l||e.readonly||(c=null,v.value=200,n("clickOption",e.options[t]))})(r)},f={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:s},m={name:a.iconName||"success",class:[$e("icon",{disabled:u,selected:e.value.includes(d)}),a.iconClassName],onClick:()=>(t=>{l||e.readonly||(c=null,v.value=200,h(t),n("clickIcon",e.options[t][e.fields.value],e.options[t]))})(r)};return t.createVNode("li",p,[o.option?o.option(a):t.createVNode("div",f,null),t.createVNode(t.resolveComponent("van-icon"),m,null)])}))};return T(Be),we({stopMomentum:b}),t.watchEffect((()=>{const t=e.options.findIndex((t=>t[e.fields.value]===e.value[e.value.length-1])),n=-ge(e.options,t)*e.optionHeight;d.value=n})),I("touchmove",(t=>{if(e.readonly)return;p.move(t),p.isVertical()&&(l=!0,L(t,!0)),d.value=J(i+p.deltaY.value,-f()*e.optionHeight,e.optionHeight);const n=Date.now();n-a>300&&(a=n,r=d.value)}),{target:s}),()=>t.createVNode("div",{ref:s,class:$e(),onTouchstartPassive:w,onTouchend:y,onTouchcancel:y},[t.createVNode("ul",{ref:u,style:{transform:`translate3d(0, ${d.value+m()}px, 0)`,transitionDuration:`${v.value}ms`,transitionProperty:v.value?"all":"none"},class:$e("wrapper"),onTransitionend:b},[x()])])}}),[Ie]=ve("picker-toolbar"),ze={title:String,cancelButtonText:String,confirmButtonText:String},Me=["cancel","confirm","title","toolbar"],Ae=Object.keys(ze),Ee=t.defineComponent({name:Ie,props:ze,emits:["confirm","cancel"],setup(e,{emit:n,slots:o}){const l=()=>n("cancel"),i=()=>n("confirm"),a=()=>{const n=e.cancelButtonText||me("cancel");return t.createVNode("button",{type:"button",class:[fe("cancel"),se],onClick:l},[o.cancel?o.cancel():n])},r=()=>{const n=e.confirmButtonText||me("confirm");return t.createVNode("button",{type:"button",class:[fe("confirm"),se],onClick:i},[o.confirm?o.confirm():n])};return()=>t.createVNode("div",{class:fe("toolbar")},[o.toolbar?o.toolbar():[a(),o.title?o.title():e.title?t.createVNode("div",{class:[fe("title"),"van-ellipsis"]},[e.title]):void 0,r()]])}});let He=0;function De(){const e=t.getCurrentInstance(),{name:n="unknown"}=(null==e?void 0:e.type)||{};return"test"===process.env.NODE_ENV?n:`${n}-${++He}`}const Pe={to:[String,Object],url:String,replace:Boolean};const Re=Symbol();function Le(e){const n=t.inject(Re,null);n&&t.watch(n,(t=>{t&&e()}))}const[je,Ye]=ie("sticky"),Xe={zIndex:f,position:w("top"),container:Object,offsetTop:b(0),offsetBottom:b(0)};const _e=de(t.defineComponent({name:je,props:Xe,emits:["scroll","change"],setup(e,{emit:n,slots:o}){const l=t.ref(),i=H(l),a=t.reactive({fixed:!1,width:0,height:0,transform:0}),r=t.computed((()=>U("top"===e.position?e.offsetTop:e.offsetBottom))),c=t.computed((()=>{const{fixed:e,height:t,width:n}=a;if(e)return{width:`${n}px`,height:`${t}px`}})),d=t.computed((()=>{if(!a.fixed)return;const t=s(function(e){const t={};return void 0!==e&&(t.zIndex=+e),t}(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${r.value}px`});return a.transform&&(t.transform=`translate3d(0, ${a.transform}px, 0)`),t})),v=()=>{if(!l.value||j(l))return;const{container:t,position:o}=e,i=S(l),c=D(window);if(a.width=i.width,a.height=i.height,"top"===o)if(t){const e=S(t),n=e.bottom-r.value-a.height;a.fixed=r.value>i.top&&e.bottom>0,a.transform=n<0?n:0}else a.fixed=r.value>i.top;else{const{clientHeight:e}=document.documentElement;if(t){const n=S(t),o=e-n.top-r.value-a.height;a.fixed=e-r.value<i.bottom&&e>n.top,a.transform=o<0?-o:0}else a.fixed=e-r.value<i.bottom}(e=>{n("scroll",{scrollTop:e,isFixed:a.fixed})})(c)};return t.watch((()=>a.fixed),(e=>n("change",e))),I("scroll",v,{target:i,passive:!0}),function(e,n){if(!u||!window.IntersectionObserver)return;const o=new IntersectionObserver((e=>{n(e[0].intersectionRatio>0)}),{root:document.body}),l=()=>{e.value&&o.unobserve(e.value)};t.onDeactivated(l),t.onBeforeUnmount(l),O((()=>{e.value&&o.observe(e.value)}))}(l,v),()=>{var e;return t.createVNode("div",{ref:l,style:c.value},[t.createVNode("div",{class:Ye({fixed:a.fixed}),style:d.value},[null==(e=o.default)?void 0:e.call(o)])])}}})),[We,Fe]=ie("badge"),Ue={dot:Boolean,max:f,tag:w("div"),color:String,offset:Array,content:f,showZero:m,position:w("top-right")};const Ze=de(t.defineComponent({name:We,props:Ue,setup(e,{slots:n}){const o=()=>{if(n.content)return!0;const{content:t,showZero:o}=e;return l(t)&&""!==t&&(o||0!==t&&"0"!==t)},i=()=>{const{dot:t,max:i,content:a}=e;if(!t&&o())return n.content?n.content():l(i)&&r(a)&&+a>i?`${i}+`:a},a=t.computed((()=>{const t={background:e.color};if(e.offset){const[o,l]=e.offset;n.default?(t.top=_(l),t.right="number"==typeof o?_(-o):o.startsWith("-")?o.replace("-",""):`-${o}`):(t.marginTop=_(l),t.marginLeft=_(o))}return t})),c=()=>{if(o()||e.dot)return t.createVNode("div",{class:Fe([e.position,{dot:e.dot,fixed:!!n.default}]),style:a.value},[i()])};return()=>{if(n.default){const{tag:o}=e;return t.createVNode(o,{class:Fe("wrapper")},{default:()=>[n.default(),c()]})}return c()}}})),[qe,Je]=ie("tab");var Ge=t.defineComponent({name:qe,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:f,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:m},setup(e,{slots:n}){const o=t.computed((()=>{const t={},{type:n,color:o,disabled:l,isActive:i,activeColor:a,inactiveColor:r}=e;o&&"card"===n&&(t.borderColor=o,l||(i?t.backgroundColor=o:t.color=o));const c=i?a:r;return c&&(t.color=c),t})),i=()=>{const o=t.createVNode("span",{class:Je("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||l(e.badge)&&""!==e.badge?t.createVNode(Ze,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[o]}):o};return()=>t.createVNode("div",{id:e.id,role:"tab",class:[Je([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:o.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[i()])}});const[Ke,Qe]=ie("swipe"),et={loop:m,width:f,height:f,vertical:Boolean,autoplay:b(0),duration:b(500),touchable:m,lazyRender:Boolean,initialSwipe:b(0),indicatorColor:String,showIndicators:m,stopPropagation:m},tt=Symbol(Ke);const nt=de(t.defineComponent({name:Ke,props:et,emits:["change"],setup(e,{emit:n,slots:o}){const l=t.ref(),i=t.ref(),a=t.reactive({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),r=Se(),{children:c,linkChildren:s}=B(tt),u=t.computed((()=>c.length)),d=t.computed((()=>a[e.vertical?"height":"width"])),v=t.computed((()=>e.vertical?r.deltaY.value:r.deltaX.value)),p=t.computed((()=>{if(a.rect){return(e.vertical?a.rect.height:a.rect.width)-d.value*u.value}return 0})),f=t.computed((()=>Math.ceil(Math.abs(p.value)/d.value))),m=t.computed((()=>u.value*d.value)),h=t.computed((()=>(a.active+u.value)%u.value)),g=t.computed((()=>{const t=e.vertical?"vertical":"horizontal";return r.direction.value===t})),b=t.computed((()=>{const t={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${a.offset}px)`};if(d.value){const n=e.vertical?"height":"width",o=e.vertical?"width":"height";t[n]=`${m.value}px`,t[o]=e[o]?`${e[o]}px`:""}return t})),w=(t,n=0)=>{let o=t*d.value;e.loop||(o=Math.min(o,-p.value));let l=n-o;return e.loop||(l=J(l,p.value,0)),l},x=({pace:t=0,offset:o=0,emitChange:l})=>{if(u.value<=1)return;const{active:i}=a,r=(t=>{const{active:n}=a;return t?e.loop?J(n+t,-1,u.value):J(n+t,0,f.value):n})(t),s=w(r,o);if(e.loop){if(c[0]&&s!==p.value){const e=s<p.value;c[0].setOffset(e?m.value:0)}if(c[u.value-1]&&0!==s){const e=s>0;c[u.value-1].setOffset(e?-m.value:0)}}a.active=r,a.offset=s,l&&r!==i&&n("change",h.value)},N=()=>{a.swiping=!0,a.active<=-1?x({pace:u.value}):a.active>=u.value&&x({pace:-u.value})},k=()=>{N(),r.reset(),C((()=>{a.swiping=!1,x({pace:1,emitChange:!0})}))};let V;const S=()=>clearTimeout(V),T=()=>{S(),e.autoplay>0&&u.value>1&&(V=setTimeout((()=>{k(),T()}),+e.autoplay))},$=(n=+e.initialSwipe)=>{if(!l.value)return;const o=()=>{var t,o;if(!j(l)){const n={width:l.value.offsetWidth,height:l.value.offsetHeight};a.rect=n,a.width=+(null!=(t=e.width)?t:n.width),a.height=+(null!=(o=e.height)?o:n.height)}u.value&&(n=Math.min(u.value-1,n)),a.active=n,a.swiping=!0,a.offset=w(n),c.forEach((e=>{e.setOffset(0)})),T()};j(l)?t.nextTick().then(o):o()},O=()=>$(a.active);let M;const A=t=>{e.touchable&&(r.start(t),M=Date.now(),S(),N())},E=()=>{if(!e.touchable||!a.swiping)return;const t=Date.now()-M,n=v.value/t;if((Math.abs(n)>.25||Math.abs(v.value)>d.value/2)&&g.value){const t=e.vertical?r.offsetY.value:r.offsetX.value;let n=0;n=e.loop?t>0?v.value>0?-1:1:0:-Math[v.value>0?"ceil":"floor"](v.value/d.value),x({pace:n,emitChange:!0})}else v.value&&x({pace:0});a.swiping=!1,T()},H=(n,o)=>{const l=o===h.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return t.createVNode("i",{style:i,class:Qe("indicator",{active:l})},null)};return we({prev:()=>{N(),r.reset(),C((()=>{a.swiping=!1,x({pace:-1,emitChange:!0})}))},next:k,state:a,resize:O,swipeTo:(t,n={})=>{N(),r.reset(),C((()=>{let o;o=e.loop&&t===u.value?0===a.active?0:t:t%u.value,n.immediate?C((()=>{a.swiping=!1})):a.swiping=!1,x({pace:o-a.active,emitChange:!0})}))}}),s({size:d,props:e,count:u,activeIndicator:h}),t.watch((()=>e.initialSwipe),(e=>$(+e))),t.watch(u,(()=>$(a.active))),t.watch((()=>e.autoplay),T),t.watch([Y,X],O),t.watch(function(){if(!z&&(z=t.ref("visible"),y)){const e=()=>{z.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return z}(),(e=>{"visible"===e?T():S()})),t.onMounted($),t.onActivated((()=>$(a.active))),Le((()=>$(a.active))),t.onDeactivated(S),t.onBeforeUnmount(S),I("touchmove",(t=>{if(e.touchable&&a.swiping&&(r.move(t),g.value)){!e.loop&&(0===a.active&&v.value>0||a.active===u.value-1&&v.value<0)||(L(t,e.stopPropagation),x({offset:v.value}))}}),{target:i}),()=>{var n;return t.createVNode("div",{ref:l,class:Qe()},[t.createVNode("div",{ref:i,style:b.value,class:Qe("track",{vertical:e.vertical}),onTouchstartPassive:A,onTouchend:E,onTouchcancel:E},[null==(n=o.default)?void 0:n.call(o)]),o.indicator?o.indicator({active:h.value,total:u.value}):e.showIndicators&&u.value>1?t.createVNode("div",{class:Qe("indicators",{vertical:e.vertical})},[Array(u.value).fill("").map(H)]):void 0])}}})),[ot,lt]=ie("tabs");var it=t.defineComponent({name:ot,props:{count:h(Number),inited:Boolean,animated:Boolean,duration:h(f),swipeable:Boolean,lazyRender:Boolean,currentIndex:h(Number)},emits:["change"],setup(e,{emit:n,slots:o}){const l=t.ref(),i=e=>n("change",e),a=()=>{var n;const a=null==(n=o.default)?void 0:n.call(o);return e.animated||e.swipeable?t.createVNode(nt,{ref:l,loop:!1,class:lt("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:i},{default:()=>[a]}):a},r=t=>{const n=l.value;n&&n.state.active!==t&&n.swipeTo(t,{immediate:!e.inited})};return t.watch((()=>e.currentIndex),r),t.onMounted((()=>{r(e.currentIndex)})),we({swipeRef:l}),()=>t.createVNode("div",{class:lt("content",{animated:e.animated||e.swipeable})},[a()])}});const[at,rt]=ie("tabs"),ct={type:w("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:b(0),duration:b(.3),animated:Boolean,ellipsis:m,swipeable:Boolean,scrollspy:Boolean,offsetTop:b(0),background:String,lazyRender:m,lineWidth:f,lineHeight:f,beforeChange:Function,swipeThreshold:b(5),titleActiveColor:String,titleInactiveColor:String},st=Symbol(at);var ut=t.defineComponent({name:at,props:ct,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:o}){let i,a,r;const c=t.ref(),s=t.ref(),u=t.ref(),d=t.ref(),p=De(),f=H(c),[m,h]=function(){const e=t.ref([]),n=[];return t.onBeforeUpdate((()=>{e.value=[]})),[e,t=>(n[t]||(n[t]=n=>{e.value[t]=n}),n[t])]}(),{children:g,linkChildren:b}=B(st),w=t.reactive({inited:!1,position:"",lineStyle:{},currentIndex:-1}),y=t.computed((()=>g.length>e.swipeThreshold||!e.ellipsis||e.shrink)),C=t.computed((()=>({borderColor:e.color,background:e.background}))),N=(e,t)=>{var n;return null!=(n=e.name)?n:t},k=t.computed((()=>{const e=g[w.currentIndex];if(e)return N(e,w.currentIndex)})),V=t.computed((()=>U(e.offsetTop))),T=t.computed((()=>e.sticky?V.value+i:0)),$=t=>{const n=s.value,o=m.value;if(!(y.value&&n&&o&&o[w.currentIndex]))return;const l=o[w.currentIndex].$el;!function(e,t,n){let o=0;const l=e.scrollLeft,i=0===n?1:Math.round(1e3*n/16);!function n(){e.scrollLeft+=(t-l)/i,++o<i&&x(n)}()}(n,l.offsetLeft-(n.offsetWidth-l.offsetWidth)/2,t?0:+e.duration)},z=()=>{const n=w.inited;t.nextTick((()=>{const t=m.value;if(!t||!t[w.currentIndex]||"line"!==e.type||j(c.value))return;const o=t[w.currentIndex].$el,{lineWidth:i,lineHeight:a}=e,r=o.offsetLeft+o.offsetWidth/2,s={width:_(i),backgroundColor:e.color,transform:`translateX(${r}px) translateX(-50%)`};if(n&&(s.transitionDuration=`${e.duration}s`),l(a)){const e=_(a);s.height=e,s.borderRadius=e}w.lineStyle=s}))},M=(t,o)=>{const i=(e=>{const t=e<w.currentIndex?-1:1;for(;e>=0&&e<g.length;){if(!g[e].disabled)return e;e+=t}})(t);if(!l(i))return;const a=g[i],s=N(a,i),u=null!==w.currentIndex;var d;w.currentIndex=i,s!==e.active&&(n("update:active",s),u&&n("change",s,a.title)),o||$(),z(),r&&!e.scrollspy&&(d=Math.ceil(R(c.value)-V.value),P(window,d),P(document.body,d))},A=(e,t)=>{const n=g.find(((t,n)=>N(t,n)===e)),o=n?g.indexOf(n):0;M(o,t)},E=(t=!1)=>{if(e.scrollspy){const n=g[w.currentIndex].$el;if(n&&f.value){const o=R(n,f.value)-T.value;a=!0,function(e,t,n,o){let l=D(e);const i=l<t,a=0===n?1:Math.round(1e3*n/16),r=(t-l)/a;!function n(){l+=r,(i&&l>t||!i&&l<t)&&(l=t),P(e,l),i&&l<t||!i&&l>t?x(n):o&&x(o)}()}(f.value,o,t?0:+e.duration,(()=>{a=!1}))}}},L=(t,o,l)=>{const{title:i,disabled:a}=g[o],r=N(g[o],o);a||(ue(e.beforeChange,{args:[r],done:()=>{M(o),E()}}),function({to:e,url:t,replace:n,$router:o}){e&&o?o[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}(t)),n("clickTab",{name:r,title:i,event:l,disabled:a})},X=e=>{r=e.isFixed,n("scroll",e)},W=()=>{if("line"===e.type&&g.length)return t.createVNode("div",{class:rt("line"),style:w.lineStyle},null)},F=()=>{var n,l;const{type:i,border:a}=e;return t.createVNode("div",{ref:u,class:[rt("wrap"),{[re]:"line"===i&&a}]},[t.createVNode("div",{ref:s,role:"tablist",class:rt("nav",[i,{shrink:e.shrink,complete:y.value}]),style:C.value,"aria-orientation":"horizontal"},[null==(n=o["nav-left"])?void 0:n.call(o),g.map(((n,o)=>t.createVNode(Ge,t.mergeProps({key:n.id,id:`${p}-${o}`,ref:h(o),type:e.type,color:e.color,style:n.titleStyle,class:n.titleClass,shrink:e.shrink,isActive:o===w.currentIndex,controls:n.id,scrollable:y.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:e=>L(n,o,e)},v(n,["dot","badge","title","disabled","showZeroBadge"])),{title:n.$slots.title}))),W(),null==(l=o["nav-right"])?void 0:l.call(o)])])};t.watch([()=>e.color,Y],z),t.watch((()=>e.active),(e=>{e!==k.value&&A(e)})),t.watch((()=>g.length),(()=>{w.inited&&(A(e.active),z(),t.nextTick((()=>{$(!0)})))}));return we({resize:()=>{z(),t.nextTick((()=>{var e,t;return null==(t=null==(e=d.value)?void 0:e.swipeRef.value)?void 0:t.resize()}))},scrollTo:e=>{t.nextTick((()=>{A(e),E(!0)}))}}),t.onActivated(z),Le(z),O((()=>{A(e.active,!0),t.nextTick((()=>{w.inited=!0,u.value&&(i=S(u.value).height),$(!0)}))})),I("scroll",(()=>{if(e.scrollspy&&!a){const e=(()=>{for(let e=0;e<g.length;e++){const{top:t}=S(g[e].$el);if(t>T.value)return 0===e?0:e-1}return g.length-1})();M(e)}}),{target:f,passive:!0}),b({id:p,props:e,setLine:z,onRendered:(e,t)=>n("rendered",e,t),currentName:k,scrollIntoView:$}),()=>{var n;return t.createVNode("div",{ref:c,class:rt([e.type])},[e.sticky?t.createVNode(_e,{container:c.value,offsetTop:V.value,onScroll:X},{default:()=>{var e;return[F(),null==(e=o["nav-bottom"])?void 0:e.call(o)]}}):[F(),null==(n=o["nav-bottom"])?void 0:n.call(o)],t.createVNode(it,{ref:d,count:g.length,inited:w.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:w.currentIndex,onChange:M},{default:()=>{var e;return[null==(e=o.default)?void 0:e.call(o)]}})])}}});const dt=Symbol(),[vt,pt]=ie("swipe-item");const ft=de(t.defineComponent({name:vt,setup(e,{slots:n}){let o;const l=t.reactive({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=T(tt);if(!i)return void process.env.NODE_ENV;const r=t.computed((()=>{const e={},{vertical:t}=i.props;return i.size.value&&(e[t?"height":"width"]=`${i.size.value}px`),l.offset&&(e.transform=`translate${t?"Y":"X"}(${l.offset}px)`),e})),c=t.computed((()=>{const{loop:e,lazyRender:t}=i.props;if(!t||o)return!0;if(!l.mounted)return!1;const n=i.activeIndicator.value,r=i.count.value-1,c=0===n&&e?r:n-1,s=n===r&&e?0:n+1;return o=a.value===n||a.value===c||a.value===s,o}));return t.onMounted((()=>{t.nextTick((()=>{l.mounted=!0}))})),we({setOffset:e=>{l.offset=e}}),()=>{var e;return t.createVNode("div",{class:pt(),style:r.value},[c.value?null==(e=n.default)?void 0:e.call(n):null])}}})),[mt,ht]=ie("tab"),gt=s({},Pe,{dot:Boolean,name:f,badge:f,title:String,disabled:Boolean,titleClass:null,titleStyle:[String,Object],showZeroBadge:m});const bt=de(t.defineComponent({name:mt,props:gt,setup(e,{slots:n}){const o=De(),l=t.ref(!1),{parent:i,index:a}=T(st);if(!i)return void process.env.NODE_ENV;const r=()=>{var t;return null!=(t=e.name)?t:a.value},c=t.computed((()=>{const n=r()===i.currentName.value;return n&&!l.value&&(l.value=!0,i.props.lazyRender&&t.nextTick((()=>{i.onRendered(r(),e.title)}))),n})),s=t.ref(!c.value);return t.watch(c,(e=>{e?s.value=!1:C((()=>{s.value=!0}))})),t.watch((()=>e.title),(()=>{i.setLine(),i.scrollIntoView()})),t.provide(dt,c),()=>{var e;const r=`${i.id}-${a.value}`,{animated:u,swipeable:d,scrollspy:v,lazyRender:p}=i.props;if(!n.default&&!u)return;const f=v||c.value;if(u||d)return t.createVNode(ft,{id:o,role:"tabpanel",class:ht("panel-wrapper",{inactive:s.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":r},{default:()=>{var e;return[t.createVNode("div",{class:ht("panel")},[null==(e=n.default)?void 0:e.call(n)])]}});const m=l.value||v||!p?null==(e=n.default)?void 0:e.call(n):null;return we({id:o}),t.withDirectives(t.createVNode("div",{id:o,role:"tabpanel",class:ht("panel"),tabindex:f?0:-1,"aria-labelledby":r},[m]),[[t.vShow,f]])}}})),wt=de(ut),[yt,xt,Ct]=ie("picker"),[Nt]=ie("picker-toolbar"),kt={title:String,cancelButtonText:String,confirmButtonText:String};var Vt=t.defineComponent({name:Nt,props:kt,emits:["confirm","cancel"],setup(e,{emit:n,slots:o}){const l=()=>n("cancel"),i=()=>n("confirm"),a=()=>{const n=e.cancelButtonText||Ct("cancel");return t.createVNode("button",{type:"button",class:[xt("cancel"),se],onClick:l},[o.cancel?o.cancel():n])},r=()=>{const n=e.confirmButtonText||Ct("confirm");return t.createVNode("button",{type:"button",class:[xt("confirm"),se],onClick:i},[o.confirm?o.confirm():n])};return()=>t.createVNode("div",{class:xt("toolbar")},[o.toolbar?o.toolbar():[a(),o.title?o.title():e.title?t.createVNode("div",{class:[xt("title"),"van-ellipsis"]},[e.title]):void 0,r()]])}});const[St,Tt]=ie("picker-group"),$t=Symbol(St),Bt=s({tabs:g()},kt);t.defineComponent({name:St,props:Bt,emits:["confirm","cancel"],setup(e,{emit:n,slots:o}){const{children:l,linkChildren:i}=B($t);i();const a=()=>{n("confirm",l.map((e=>e.confirm())))},r=()=>n("cancel");return()=>{var n;const l=null==(n=o.default)?void 0:n.call(o);return t.createVNode("div",{class:Tt()},[t.createVNode(Vt,t.mergeProps(e,{onConfirm:a,onCancel:r}),null),t.createVNode(wt,{shrink:!0,class:Tt("tabs"),animated:!0},{default:()=>[e.tabs.map(((e,n)=>t.createVNode(bt,{title:e,titleClass:Tt("tab-title")},{default:()=>[null==l?void 0:l[n]]})))]})])}}});const Ot=s({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:b(44),showToolbar:m,swipeDuration:b(1e3),visibleOptionNum:b(6)},ze),It=s({},Ot,{columns:g(),modelValue:g(),toolbarPosition:w("top"),columnsFieldNames:Object}),zt=de(t.defineComponent({name:"BetterVantPicker",props:It,emits:["confirm","cancel","clickOption","clickIcon","update:modelValue"],setup(e,{emit:n,slots:o}){const i=t.ref(),a=t.ref(e.modelValue.slice(0)),{parent:r}=T($t),{children:c,linkChildren:u}=B(Be);u();const d=t.computed((()=>function(e){return s({text:"text",value:"value",children:"children"},e)}(e.columnsFieldNames))),f=t.computed((()=>U(e.optionHeight))),m=t.computed((()=>function(e,t){const n=e[0];if(n){if(Array.isArray(n))return"multiple";if(t.children in n)return"cascade"}return"default"}(e.columns,d.value))),h=t.computed((()=>{const{columns:t}=e;switch(m.value){case"multiple":return t;case"cascade":return function(e,t,n){const o=[];let i={[t.children]:e},a=0;for(;i&&i[t.children];){const e=i[t.children],r=n.value[a];i=l(r)?be(e,r,t):void 0,!i&&e.length&&(i=be(e,he(e)[t.value],t)),a++,o.push(e)}return o}(t,d.value,a);default:return[t]}})),g=t.computed((()=>h.value.some((e=>e.length)))),b=t.computed((()=>h.value.map(((e,t)=>be(e,a.value[t],d.value))))),w=(e,t)=>{if(a.value.includes(t)){if(a.value.findIndex((e=>e===t))>=0){const e=a.value.slice(0);a.value=e.filter((e=>e!==t))}}else{const e=a.value.slice(0);e.push(t),a.value=e}},y=()=>({selectedValues:a.value.slice(0),selectedOptions:b.value}),x=()=>{c.forEach((e=>e.stopMomentum()));const e=y();return n("confirm",e),e},C=()=>n("cancel",y()),N=()=>h.value.map(((l,i)=>t.createVNode(Oe,{value:a.value,fields:d.value,options:l,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:f.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onClickOption:e=>((e,t)=>n("clickOption",s({columnIndex:t,currentOption:e},y())))(e,i),onClickIcon:(e,t)=>((e,t,o)=>{w(0,e),n("clickIcon",s({columnIndex:o,currentOption:t},y()))})(e,t,i)},{option:o.option}))),k=e=>{if(g.value){const n={height:`${f.value}px`},o={backgroundSize:`100% ${(e-f.value)/2}px`};return[t.createVNode("div",{class:fe("mask"),style:o},null),t.createVNode("div",{class:[ce,fe("frame")],style:n},null)]}},V=()=>{const n=f.value*+e.visibleOptionNum,o={height:`${n}px`};return t.createVNode("div",{ref:i,class:fe("columns"),style:o},[N(),k(n)])},S=()=>{if(e.showToolbar&&!r)return t.createVNode(Ee,t.mergeProps(v(e,Ae),{onConfirm:x,onCancel:C}),v(o,Me))};let $;t.watch(h,(e=>{e.forEach(((e,t)=>{e.length&&!((e,t,n)=>void 0!==t&&!!e.find((e=>e[n.value]===t)))(e,a.value[t],d.value)&&w(0,he(e)[d.value.value])}))}),{immediate:!0}),t.watch((()=>e.modelValue),(e=>{p(e,a.value)||p(e,$)||(a.value=e.slice(0))}),{deep:!0}),t.watch(a,(t=>{p(t,e.modelValue)||($=t.slice(0),n("update:modelValue",$))}),{immediate:!0}),I("touchmove",L,{target:i});return we({confirm:x,getSelectedOptions:()=>b.value}),()=>{var n,l;return t.createVNode("div",{class:fe()},["top"===e.toolbarPosition?S():null,e.loading?t.createVNode(Ve,{class:fe("loading")},null):null,null==(n=o["columns-top"])?void 0:n.call(o),V(),null==(l=o["columns-bottom"])?void 0:l.call(o),"bottom"===e.toolbarPosition?S():null])}}})),Mt={install(e){e.component(zt.name,zt)}};return e.BetterPicker=zt,e.default=Mt,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),e}({},Vue,vant);
