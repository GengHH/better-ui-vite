(function(q,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(q=typeof globalThis<"u"?globalThis:q||self,n(q.picker={},q.Vue))})(this,function(q,n){"use strict";const W=e=>e!=null,Te=e=>typeof e=="function",xe=e=>e!==null&&typeof e=="object",xt=e=>xe(e)&&Te(e.then)&&Te(e.catch),Ue=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),Et=()=>Ee?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function St(){}const L=Object.assign,Ee=typeof window<"u";function We(e,t){const o=t.split(".");let a=e;return o.forEach(c=>{var i;a=xe(a)&&(i=a[c])!=null?i:""}),a}function Se(e,t,o){return t.reduce((a,c)=>((!o||e[c]!==void 0)&&(a[c]=e[c]),a),{})}const Ne=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Nt=null,O=[Number,String],Y={type:Boolean,default:!0},G=e=>({type:e,required:!0}),de=()=>({type:Array,default:()=>[]}),M=e=>({type:O,default:e}),te=e=>({type:String,default:e});var ae=typeof window<"u";function ce(e){return ae?requestAnimationFrame(e):-1}function re(e){ce(()=>ce(e))}var Bt=e=>e===window,Xe=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),ne=e=>{const t=n.unref(e);if(Bt(t)){const o=t.innerWidth,a=t.innerHeight;return Xe(o,a)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Xe(0,0)};function fe(e){const t=n.inject(e,null);if(t){const o=n.getCurrentInstance(),{link:a,unlink:c,internalChildren:i}=t;a(o),n.onUnmounted(()=>c(o));const r=n.computed(()=>i.indexOf(o));return{parent:t,index:r}}return{parent:null,index:n.ref(-1)}}function kt(e){const t=[],o=a=>{Array.isArray(a)&&a.forEach(c=>{var i;n.isVNode(c)&&(t.push(c),(i=c.component)!=null&&i.subTree&&(t.push(c.component.subTree),o(c.component.subTree.children)),c.children&&o(c.children))})};return o(e),t}function Ot(e,t,o){const a=kt(e.subTree.children);o.sort((i,r)=>a.indexOf(i.vnode)-a.indexOf(r.vnode));const c=o.map(i=>i.proxy);t.sort((i,r)=>{const u=c.indexOf(i),l=c.indexOf(r);return u-l})}function me(e){const t=n.reactive([]),o=n.reactive([]),a=n.getCurrentInstance();return{children:t,linkChildren:i=>{const r=l=>{l.proxy&&(o.push(l),t.push(l.proxy),Ot(a,t,o))},u=l=>{const d=o.indexOf(l);t.splice(d,1),o.splice(d,1)};n.provide(e,Object.assign({link:r,unlink:u,children:t,internalChildren:o},i))}}}function Be(e){let t;n.onMounted(()=>{e(),n.nextTick(()=>{t=!0})}),n.onActivated(()=>{t&&e()})}function le(e,t,o={}){if(!ae)return;const{target:a=window,passive:c=!1,capture:i=!1}=o;let r;const u=d=>{const f=n.unref(d);f&&!r&&(f.addEventListener(e,t,{capture:i,passive:c}),r=!0)},l=d=>{const f=n.unref(d);f&&r&&(f.removeEventListener(e,t,i),r=!1)};n.onUnmounted(()=>l(a)),n.onDeactivated(()=>l(a)),Be(()=>u(a)),n.isRef(a)&&n.watch(a,(d,f)=>{l(f),u(d)})}var he,ke;function $t(){if(!he&&(he=n.ref(0),ke=n.ref(0),ae)){const e=()=>{he.value=window.innerWidth,ke.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:he,height:ke}}var Vt=/scroll|auto|overlay/i,Ke=ae?window:void 0;function It(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function Pt(e,t=Ke){let o=e;for(;o&&o!==t&&It(o);){const{overflowY:a}=window.getComputedStyle(o);if(Vt.test(a))return o;o=o.parentNode}return t}function Ze(e,t=Ke){const o=n.ref();return n.onMounted(()=>{e.value&&(o.value=Pt(e.value,t))}),o}var ve;function Dt(){if(!ve&&(ve=n.ref("visible"),ae)){const e=()=>{ve.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return ve}function Oe(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function $e(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function _t(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function At(e){$e(window,e),$e(document.body,e)}function qe(e,t){if(e===window)return 0;const o=t?Oe(t):_t();return ne(e).top+o}Et();const Rt=e=>e.stopPropagation();function Ve(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Rt(e)}function ge(e){const t=n.unref(e);if(!t)return!1;const o=window.getComputedStyle(t),a=o.display==="none",c=t.offsetParent===null&&o.position!=="fixed";return a||c}const{width:Ie,height:Ge}=$t();function j(e){if(W(e))return Ue(e)?`${e}px`:String(e)}function Mt(e){if(W(e)){if(Array.isArray(e))return{width:j(e[0]),height:j(e[1])};const t=j(e);return{width:t,height:t}}}function zt(e){const t={};return e!==void 0&&(t.zIndex=+e),t}let Pe;function Ft(){if(!Pe){const e=document.documentElement,t=e.style.fontSize||window.getComputedStyle(e).fontSize;Pe=parseFloat(t)}return Pe}function Ht(e){return e=e.replace(/rem/g,""),+e*Ft()}function Lt(e){return e=e.replace(/vw/g,""),+e*Ie.value/100}function Yt(e){return e=e.replace(/vh/g,""),+e*Ge.value/100}function De(e){if(typeof e=="number")return e;if(Ee){if(e.includes("rem"))return Ht(e);if(e.includes("vw"))return Lt(e);if(e.includes("vh"))return Yt(e)}return parseFloat(e)}const jt=/-(\w)/g,Je=e=>e.replace(jt,(t,o)=>o.toUpperCase()),oe=(e,t,o)=>Math.min(Math.max(e,t),o),{hasOwnProperty:Ut}=Object.prototype;function Wt(e,t,o){const a=t[o];!W(a)||(!Ut.call(e,o)||!xe(a)?e[o]=a:e[o]=Qe(Object(e[o]),a))}function Qe(e,t){return Object.keys(t).forEach(o=>{Wt(e,t,o)}),e}var Xt={name:"\u59D3\u540D",tel:"\u7535\u8BDD",save:"\u4FDD\u5B58",confirm:"\u786E\u8BA4",cancel:"\u53D6\u6D88",delete:"\u5220\u9664",loading:"\u52A0\u8F7D\u4E2D...",noCoupon:"\u6682\u65E0\u4F18\u60E0\u5238",nameEmpty:"\u8BF7\u586B\u5199\u59D3\u540D",addContact:"\u6DFB\u52A0\u8054\u7CFB\u4EBA",telInvalid:"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u7535\u8BDD",vanCalendar:{end:"\u7ED3\u675F",start:"\u5F00\u59CB",title:"\u65E5\u671F\u9009\u62E9",weekdays:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],monthTitle:(e,t)=>`${e}\u5E74${t}\u6708`,rangePrompt:e=>`\u6700\u591A\u9009\u62E9 ${e} \u5929`},vanCascader:{select:"\u8BF7\u9009\u62E9"},vanPagination:{prev:"\u4E0A\u4E00\u9875",next:"\u4E0B\u4E00\u9875"},vanPullRefresh:{pulling:"\u4E0B\u62C9\u5373\u53EF\u5237\u65B0...",loosing:"\u91CA\u653E\u5373\u53EF\u5237\u65B0..."},vanSubmitBar:{label:"\u5408\u8BA1:"},vanCoupon:{unlimited:"\u65E0\u95E8\u69DB",discount:e=>`${e}\u6298`,condition:e=>`\u6EE1${e}\u5143\u53EF\u7528`},vanCouponCell:{title:"\u4F18\u60E0\u5238",count:e=>`${e}\u5F20\u53EF\u7528`},vanCouponList:{exchange:"\u5151\u6362",close:"\u4E0D\u4F7F\u7528",enable:"\u53EF\u7528",disabled:"\u4E0D\u53EF\u7528",placeholder:"\u8F93\u5165\u4F18\u60E0\u7801"},vanAddressEdit:{area:"\u5730\u533A",areaEmpty:"\u8BF7\u9009\u62E9\u5730\u533A",addressEmpty:"\u8BF7\u586B\u5199\u8BE6\u7EC6\u5730\u5740",addressDetail:"\u8BE6\u7EC6\u5730\u5740",defaultAddress:"\u8BBE\u4E3A\u9ED8\u8BA4\u6536\u8D27\u5730\u5740"},vanAddressList:{add:"\u65B0\u589E\u5730\u5740"}};const et=n.ref("zh-CN"),tt=n.reactive({"zh-CN":Xt});var Kt={messages(){return tt[et.value]},use(e,t){et.value=e,this.add({[e]:t})},add(e={}){Qe(tt,e)}};function Zt(e){const t=Je(e)+".";return(o,...a)=>{const c=Kt.messages(),i=We(c,t+o)||We(c,o);return Te(i)?i(...a):i}}function _e(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((o,a)=>o+_e(e,a),""):Object.keys(t).reduce((o,a)=>o+(t[a]?_e(e,a):""),""):""}function qt(e){return(t,o)=>(t&&typeof t!="string"&&(o=t,t=""),t=t?`${e}__${t}`:e,`${t}${_e(t,o)}`)}function P(e){const t=`van-${e}`;return[t,qt(t),Zt(t)]}const nt="van-hairline",Gt=`${nt}--top-bottom`,Jt=`${nt}-unset--top-bottom`,be="van-haptics-feedback";function Qt(e,{args:t=[],done:o,canceled:a}){if(e){const c=e.apply(null,t);xt(c)?c.then(i=>{i?o():a&&a()}).catch(St):c?o():a&&a()}else o()}function J(e){return e.install=t=>{const{name:o}=e;o&&(t.component(o,e),t.component(Je(`-${o}`),e))},e}const[ro,A,we]=P("picker"),ot=e=>e.find(t=>!t.disabled)||e[0];function en(e,t){const o=e[0];if(o){if(Array.isArray(o))return"multiple";if(t.children in o)return"cascade"}return"default"}function Ae(e,t){t=oe(t,0,e.length);for(let o=t;o<e.length;o++)if(!e[o].disabled)return o;for(let o=t-1;o>=0;o--)if(!e[o].disabled)return o;return 0}const it=(e,t,o)=>t!==void 0&&!!e.find(a=>a[o.value]===t);function Re(e,t,o){const a=e.findIndex(i=>i[o.value]===t),c=Ae(e,a);return e[c]}function tn(e,t,o){const a=[];let c={[t.children]:e},i=0;for(;c&&c[t.children];){const r=c[t.children],u=o.value[i];if(c=W(u)?Re(r,u,t):void 0,!c&&r.length){const l=ot(r)[t.value];c=Re(r,l,t)}i++,a.push(r)}return a}function nn(e){const{transform:t}=window.getComputedStyle(e),o=t.slice(7,t.length-1).split(", ")[5];return Number(o)}function on(e){return L({text:"text",value:"value",children:"children"},e)}function Q(e){const t=n.getCurrentInstance();t&&L(t.proxy,e)}const[an,se]=P("loading"),cn=Array(12).fill(null).map((e,t)=>n.createVNode("i",{class:se("line",String(t+1))},null)),rn=n.createVNode("svg",{class:se("circular"),viewBox:"25 25 50 50"},[n.createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),ln={size:O,type:te("circular"),color:String,vertical:Boolean,textSize:O,textColor:String};var sn=n.defineComponent({name:an,props:ln,setup(e,{slots:t}){const o=n.computed(()=>L({color:e.color},Mt(e.size))),a=()=>{const i=e.type==="spinner"?cn:rn;return n.createVNode("span",{class:se("spinner",e.type),style:o.value},[t.icon?t.icon():i])},c=()=>{var i;if(t.default)return n.createVNode("span",{class:se("text"),style:{fontSize:j(e.textSize),color:(i=e.textColor)!=null?i:e.color}},[t.default()])};return()=>{const{type:i,vertical:r}=e;return n.createVNode("div",{class:se([i,{vertical:r}]),"aria-live":"polite","aria-busy":!0},[a(),c()])}}});const un=J(sn);function dn(e,t){return e>t?"horizontal":t>e?"vertical":""}function at(){const e=n.ref(0),t=n.ref(0),o=n.ref(0),a=n.ref(0),c=n.ref(0),i=n.ref(0),r=n.ref(""),u=()=>r.value==="vertical",l=()=>r.value==="horizontal",d=()=>{o.value=0,a.value=0,c.value=0,i.value=0,r.value=""};return{move:C=>{const E=C.touches[0];o.value=(E.clientX<0?0:E.clientX)-e.value,a.value=E.clientY-t.value,c.value=Math.abs(o.value),i.value=Math.abs(a.value);const w=10;(!r.value||c.value<w&&i.value<w)&&(r.value=dn(c.value,i.value))},start:C=>{d(),e.value=C.touches[0].clientX,t.value=C.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:o,deltaY:a,offsetX:c,offsetY:i,direction:r,isVertical:u,isHorizontal:l}}const ct=200,rt=300,fn=15,[lt,Me]=P("picker-column"),st=Symbol(lt),mn=n.defineComponent({name:lt,props:{value:O,fields:G(Object),options:de(),readonly:Boolean,allowHtml:Boolean,optionHeight:G(Number),swipeDuration:G(O),visibleOptionNum:G(O)},emits:["change","clickOption"],setup(e,{emit:t,slots:o}){let a,c,i,r,u;const l=n.ref(),d=n.ref(),f=n.ref(0),h=n.ref(0),C=at(),E=()=>e.options.length,w=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,S=y=>{const x=Ae(e.options,y),m=-x*e.optionHeight,v=()=>{const N=e.options[x][e.fields.value];N!==e.value&&t("change",N)};a&&m!==f.value?u=v:v(),f.value=m},p=y=>{a||e.readonly||(u=null,h.value=ct,S(y),t("clickOption",e.options[y]))},D=y=>oe(Math.round(-y/e.optionHeight),0,E()-1),U=(y,x)=>{const m=Math.abs(y/x);y=f.value+m/.003*(y<0?-1:1);const v=D(y);h.value=+e.swipeDuration,S(v)},$=()=>{a=!1,h.value=0,u&&(u(),u=null)},V=y=>{if(!e.readonly){if(C.start(y),a){const x=nn(d.value);f.value=Math.min(0,x-w())}h.value=0,c=f.value,i=Date.now(),r=c,u=null}},z=y=>{if(e.readonly)return;C.move(y),C.isVertical()&&(a=!0,Ve(y,!0)),f.value=oe(c+C.deltaY.value,-(E()*e.optionHeight),e.optionHeight);const x=Date.now();x-i>rt&&(i=x,r=f.value)},X=()=>{if(e.readonly)return;const y=f.value-r,x=Date.now()-i;if(x<rt&&Math.abs(y)>fn){U(y,x);return}const v=D(f.value);h.value=ct,S(v),setTimeout(()=>{a=!1},0)},F=()=>{const y={height:`${e.optionHeight}px`};return e.options.map((x,m)=>{const v=x[e.fields.text],{disabled:N}=x,K=x[e.fields.value],Z={role:"button",style:y,tabindex:N?-1:0,class:[Me("item",{disabled:N,selected:K===e.value}),x.className],onClick:()=>p(m)},ue={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:v};return n.createVNode("li",Z,[o.option?o.option(x):n.createVNode("div",ue,null)])})};return fe(st),Q({stopMomentum:$}),n.watchEffect(()=>{const y=e.options.findIndex(v=>v[e.fields.value]===e.value),m=-Ae(e.options,y)*e.optionHeight;f.value=m}),le("touchmove",z,{target:l}),()=>n.createVNode("div",{ref:l,class:Me(),onTouchstartPassive:V,onTouchend:X,onTouchcancel:X},[n.createVNode("ul",{ref:d,style:{transform:`translate3d(0, ${f.value+w()}px, 0)`,transitionDuration:`${h.value}ms`,transitionProperty:h.value?"all":"none"},class:Me("wrapper"),onTransitionend:$},[F()])])}}),[hn]=P("picker-toolbar"),ze={title:String,cancelButtonText:String,confirmButtonText:String},vn=["cancel","confirm","title","toolbar"],gn=Object.keys(ze),bn=n.defineComponent({name:hn,props:ze,emits:["confirm","cancel"],setup(e,{emit:t,slots:o}){const a=()=>{if(o.title)return o.title();if(e.title)return n.createVNode("div",{class:[A("title"),"van-ellipsis"]},[e.title])},c=()=>t("cancel"),i=()=>t("confirm"),r=()=>{const l=e.cancelButtonText||we("cancel");return n.createVNode("button",{type:"button",class:[A("cancel"),be],onClick:c},[o.cancel?o.cancel():l])},u=()=>{const l=e.confirmButtonText||we("confirm");return n.createVNode("button",{type:"button",class:[A("confirm"),be],onClick:i},[o.confirm?o.confirm():l])};return()=>n.createVNode("div",{class:A("toolbar")},[o.toolbar?o.toolbar():[r(),a(),u()]])}});function wn(e,t,o){let a=0;const c=e.scrollLeft,i=o===0?1:Math.round(o*1e3/16);function r(){e.scrollLeft+=(t-c)/i,++a<i&&ce(r)}r()}function yn(e,t,o,a){let c=Oe(e);const i=c<t,r=o===0?1:Math.round(o*1e3/16),u=(t-c)/r;function l(){c+=u,(i&&c>t||!i&&c<t)&&(c=t),$e(e,c),i&&c<t||!i&&c>t?ce(l):a&&ce(a)}l()}let pn=0;function ut(){const e=n.getCurrentInstance(),{name:t="unknown"}=(e==null?void 0:e.type)||{};return process.env.NODE_ENV==="test"?t:`${t}-${++pn}`}const Cn={to:[String,Object],url:String,replace:Boolean};function Tn({to:e,url:t,replace:o,$router:a}){e&&a?a[o?"replace":"push"](e):t&&(o?location.replace(t):location.href=t)}function xn(){const e=n.ref([]),t=[];return n.onBeforeUpdate(()=>{e.value=[]}),[e,a=>(t[a]||(t[a]=c=>{e.value[a]=c}),t[a])]}const En=Symbol();function dt(e){const t=n.inject(En,null);t&&n.watch(t,o=>{o&&e()})}function Sn(e,t){if(!Ee||!window.IntersectionObserver)return;const o=new IntersectionObserver(i=>{t(i[0].intersectionRatio>0)},{root:document.body}),a=()=>{e.value&&o.observe(e.value)},c=()=>{e.value&&o.unobserve(e.value)};n.onDeactivated(c),n.onBeforeUnmount(c),Be(a)}const[Nn,Bn]=P("sticky"),kn={zIndex:O,position:te("top"),container:Object,offsetTop:M(0),offsetBottom:M(0)};var On=n.defineComponent({name:Nn,props:kn,emits:["scroll","change"],setup(e,{emit:t,slots:o}){const a=n.ref(),c=Ze(a),i=n.reactive({fixed:!1,width:0,height:0,transform:0}),r=n.computed(()=>De(e.position==="top"?e.offsetTop:e.offsetBottom)),u=n.computed(()=>{const{fixed:h,height:C,width:E}=i;if(h)return{width:`${E}px`,height:`${C}px`}}),l=n.computed(()=>{if(!i.fixed)return;const h=L(zt(e.zIndex),{width:`${i.width}px`,height:`${i.height}px`,[e.position]:`${r.value}px`});return i.transform&&(h.transform=`translate3d(0, ${i.transform}px, 0)`),h}),d=h=>t("scroll",{scrollTop:h,isFixed:i.fixed}),f=()=>{if(!a.value||ge(a))return;const{container:h,position:C}=e,E=ne(a),w=Oe(window);if(i.width=E.width,i.height=E.height,C==="top")if(h){const S=ne(h),p=S.bottom-r.value-i.height;i.fixed=r.value>E.top&&S.bottom>0,i.transform=p<0?p:0}else i.fixed=r.value>E.top;else{const{clientHeight:S}=document.documentElement;if(h){const p=ne(h),D=S-p.top-r.value-i.height;i.fixed=S-r.value<E.bottom&&S>p.top,i.transform=D<0?-D:0}else i.fixed=S-r.value<E.bottom}d(w)};return n.watch(()=>i.fixed,h=>t("change",h)),le("scroll",f,{target:c,passive:!0}),Sn(a,f),()=>{var h;return n.createVNode("div",{ref:a,style:u.value},[n.createVNode("div",{class:Bn({fixed:i.fixed}),style:l.value},[(h=o.default)==null?void 0:h.call(o)])])}}});const $n=J(On),[Vn,ft]=P("badge"),In={dot:Boolean,max:O,tag:te("div"),color:String,offset:Array,content:O,showZero:Y,position:te("top-right")};var Pn=n.defineComponent({name:Vn,props:In,setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:r,showZero:u}=e;return W(r)&&r!==""&&(u||r!==0&&r!=="0")},a=()=>{const{dot:r,max:u,content:l}=e;if(!r&&o())return t.content?t.content():W(u)&&Ue(l)&&+l>u?`${u}+`:l},c=n.computed(()=>{const r={background:e.color};if(e.offset){const[u,l]=e.offset;t.default?(r.top=j(l),typeof u=="number"?r.right=j(-u):r.right=u.startsWith("-")?u.replace("-",""):`-${u}`):(r.marginTop=j(l),r.marginLeft=j(u))}return r}),i=()=>{if(o()||e.dot)return n.createVNode("div",{class:ft([e.position,{dot:e.dot,fixed:!!t.default}]),style:c.value},[a()])};return()=>{if(t.default){const{tag:r}=e;return n.createVNode(r,{class:ft("wrapper")},{default:()=>[t.default(),i()]})}return i()}}});const Dn=J(Pn),[_n,mt]=P("tab");var An=n.defineComponent({name:_n,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:O,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Y},setup(e,{slots:t}){const o=n.computed(()=>{const c={},{type:i,color:r,disabled:u,isActive:l,activeColor:d,inactiveColor:f}=e;r&&i==="card"&&(c.borderColor=r,u||(l?c.backgroundColor=r:c.color=r));const C=l?d:f;return C&&(c.color=C),c}),a=()=>{const c=n.createVNode("span",{class:mt("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||W(e.badge)&&e.badge!==""?n.createVNode(Dn,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[c]}):c};return()=>n.createVNode("div",{id:e.id,role:"tab",class:[mt([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:o.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[a()])}});const[ht,ye]=P("swipe"),Rn={loop:Y,width:O,height:O,vertical:Boolean,autoplay:M(0),duration:M(500),touchable:Y,lazyRender:Boolean,initialSwipe:M(0),indicatorColor:String,showIndicators:Y,stopPropagation:Y},vt=Symbol(ht);var Mn=n.defineComponent({name:ht,props:Rn,emits:["change"],setup(e,{emit:t,slots:o}){const a=n.ref(),c=n.ref(),i=n.reactive({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),r=at(),{children:u,linkChildren:l}=me(vt),d=n.computed(()=>u.length),f=n.computed(()=>i[e.vertical?"height":"width"]),h=n.computed(()=>e.vertical?r.deltaY.value:r.deltaX.value),C=n.computed(()=>i.rect?(e.vertical?i.rect.height:i.rect.width)-f.value*d.value:0),E=n.computed(()=>Math.ceil(Math.abs(C.value)/f.value)),w=n.computed(()=>d.value*f.value),S=n.computed(()=>(i.active+d.value)%d.value),p=n.computed(()=>{const b=e.vertical?"vertical":"horizontal";return r.direction.value===b}),D=n.computed(()=>{const b={transitionDuration:`${i.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${i.offset}px)`};if(f.value){const k=e.vertical?"height":"width",B=e.vertical?"width":"height";b[k]=`${w.value}px`,b[B]=e[B]?`${e[B]}px`:""}return b}),U=b=>{const{active:k}=i;return b?e.loop?oe(k+b,-1,d.value):oe(k+b,0,E.value):k},$=(b,k=0)=>{let B=b*f.value;e.loop||(B=Math.min(B,-C.value));let R=k-B;return e.loop||(R=oe(R,C.value,0)),R},V=({pace:b=0,offset:k=0,emitChange:B})=>{if(d.value<=1)return;const{active:R}=i,s=U(b),g=$(s,k);if(e.loop){if(u[0]&&g!==C.value){const T=g<C.value;u[0].setOffset(T?w.value:0)}if(u[d.value-1]&&g!==0){const T=g>0;u[d.value-1].setOffset(T?-w.value:0)}}i.active=s,i.offset=g,B&&s!==R&&t("change",S.value)},z=()=>{i.swiping=!0,i.active<=-1?V({pace:d.value}):i.active>=d.value&&V({pace:-d.value})},X=()=>{z(),r.reset(),re(()=>{i.swiping=!1,V({pace:-1,emitChange:!0})})},F=()=>{z(),r.reset(),re(()=>{i.swiping=!1,V({pace:1,emitChange:!0})})};let y;const x=()=>clearTimeout(y),m=()=>{x(),e.autoplay>0&&d.value>1&&(y=setTimeout(()=>{F(),m()},+e.autoplay))},v=(b=+e.initialSwipe)=>{if(!a.value)return;const k=()=>{var B,R;if(!ge(a)){const s={width:a.value.offsetWidth,height:a.value.offsetHeight};i.rect=s,i.width=+((B=e.width)!=null?B:s.width),i.height=+((R=e.height)!=null?R:s.height)}d.value&&(b=Math.min(d.value-1,b)),i.active=b,i.swiping=!0,i.offset=$(b),u.forEach(s=>{s.setOffset(0)}),m()};ge(a)?n.nextTick().then(k):k()},N=()=>v(i.active);let K;const Z=b=>{!e.touchable||(r.start(b),K=Date.now(),x(),z())},ue=b=>{e.touchable&&i.swiping&&(r.move(b),p.value&&(!e.loop&&(i.active===0&&h.value>0||i.active===d.value-1&&h.value<0)||(Ve(b,e.stopPropagation),V({offset:h.value}))))},Ce=()=>{if(!e.touchable||!i.swiping)return;const b=Date.now()-K,k=h.value/b;if((Math.abs(k)>.25||Math.abs(h.value)>f.value/2)&&p.value){const R=e.vertical?r.offsetY.value:r.offsetX.value;let s=0;e.loop?s=R>0?h.value>0?-1:1:0:s=-Math[h.value>0?"ceil":"floor"](h.value/f.value),V({pace:s,emitChange:!0})}else h.value&&V({pace:0});i.swiping=!1,m()},Le=(b,k={})=>{z(),r.reset(),re(()=>{let B;e.loop&&b===d.value?B=i.active===0?0:b:B=b%d.value,k.immediate?re(()=>{i.swiping=!1}):i.swiping=!1,V({pace:B-i.active,emitChange:!0})})},Ye=(b,k)=>{const B=k===S.value,R=B?{backgroundColor:e.indicatorColor}:void 0;return n.createVNode("i",{style:R,class:ye("indicator",{active:B})},null)},je=()=>{if(o.indicator)return o.indicator({active:S.value,total:d.value});if(e.showIndicators&&d.value>1)return n.createVNode("div",{class:ye("indicators",{vertical:e.vertical})},[Array(d.value).fill("").map(Ye)])};return Q({prev:X,next:F,state:i,resize:N,swipeTo:Le}),l({size:f,props:e,count:d,activeIndicator:S}),n.watch(()=>e.initialSwipe,b=>v(+b)),n.watch(d,()=>v(i.active)),n.watch(()=>e.autoplay,m),n.watch([Ie,Ge],N),n.watch(Dt(),b=>{b==="visible"?m():x()}),n.onMounted(v),n.onActivated(()=>v(i.active)),dt(()=>v(i.active)),n.onDeactivated(x),n.onBeforeUnmount(x),le("touchmove",ue,{target:c}),()=>{var b;return n.createVNode("div",{ref:a,class:ye()},[n.createVNode("div",{ref:c,style:D.value,class:ye("track",{vertical:e.vertical}),onTouchstartPassive:Z,onTouchend:Ce,onTouchcancel:Ce},[(b=o.default)==null?void 0:b.call(o)]),je()])}}});const zn=J(Mn),[Fn,gt]=P("tabs");var Hn=n.defineComponent({name:Fn,props:{count:G(Number),inited:Boolean,animated:Boolean,duration:G(O),swipeable:Boolean,lazyRender:Boolean,currentIndex:G(Number)},emits:["change"],setup(e,{emit:t,slots:o}){const a=n.ref(),c=u=>t("change",u),i=()=>{var u;const l=(u=o.default)==null?void 0:u.call(o);return e.animated||e.swipeable?n.createVNode(zn,{ref:a,loop:!1,class:gt("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:c},{default:()=>[l]}):l},r=u=>{const l=a.value;l&&l.state.active!==u&&l.swipeTo(u,{immediate:!e.inited})};return n.watch(()=>e.currentIndex,r),n.onMounted(()=>{r(e.currentIndex)}),Q({swipeRef:a}),()=>n.createVNode("div",{class:gt("content",{animated:e.animated||e.swipeable})},[i()])}});const[bt,pe]=P("tabs"),Ln={type:te("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:M(0),duration:M(.3),animated:Boolean,ellipsis:Y,swipeable:Boolean,scrollspy:Boolean,offsetTop:M(0),background:String,lazyRender:Y,lineWidth:O,lineHeight:O,beforeChange:Function,swipeThreshold:M(5),titleActiveColor:String,titleInactiveColor:String},wt=Symbol(bt);var Yn=n.defineComponent({name:bt,props:Ln,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:o}){let a,c,i;const r=n.ref(),u=n.ref(),l=n.ref(),d=n.ref(),f=ut(),h=Ze(r),[C,E]=xn(),{children:w,linkChildren:S}=me(wt),p=n.reactive({inited:!1,position:"",lineStyle:{},currentIndex:-1}),D=n.computed(()=>w.length>e.swipeThreshold||!e.ellipsis||e.shrink),U=n.computed(()=>({borderColor:e.color,background:e.background})),$=(s,g)=>{var T;return(T=s.name)!=null?T:g},V=n.computed(()=>{const s=w[p.currentIndex];if(s)return $(s,p.currentIndex)}),z=n.computed(()=>De(e.offsetTop)),X=n.computed(()=>e.sticky?z.value+a:0),F=s=>{const g=u.value,T=C.value;if(!D.value||!g||!T||!T[p.currentIndex])return;const _=T[p.currentIndex].$el,I=_.offsetLeft-(g.offsetWidth-_.offsetWidth)/2;wn(g,I,s?0:+e.duration)},y=()=>{const s=p.inited;n.nextTick(()=>{const g=C.value;if(!g||!g[p.currentIndex]||e.type!=="line"||ge(r.value))return;const T=g[p.currentIndex].$el,{lineWidth:_,lineHeight:I}=e,H=T.offsetLeft+T.offsetWidth/2,ee={width:j(_),backgroundColor:e.color,transform:`translateX(${H}px) translateX(-50%)`};if(s&&(ee.transitionDuration=`${e.duration}s`),W(I)){const Tt=j(I);ee.height=Tt,ee.borderRadius=Tt}p.lineStyle=ee})},x=s=>{const g=s<p.currentIndex?-1:1;for(;s>=0&&s<w.length;){if(!w[s].disabled)return s;s+=g}},m=(s,g)=>{const T=x(s);if(!W(T))return;const _=w[T],I=$(_,T),H=p.currentIndex!==null;p.currentIndex!==T&&(p.currentIndex=T,g||F(),y()),I!==e.active&&(t("update:active",I),H&&t("change",I,_.title)),i&&!e.scrollspy&&At(Math.ceil(qe(r.value)-z.value))},v=(s,g)=>{const T=w.find((I,H)=>$(I,H)===s),_=T?w.indexOf(T):0;m(_,g)},N=(s=!1)=>{if(e.scrollspy){const g=w[p.currentIndex].$el;if(g&&h.value){const T=qe(g,h.value)-X.value;c=!0,yn(h.value,T,s?0:+e.duration,()=>{c=!1})}}},K=(s,g,T)=>{const{title:_,disabled:I}=w[g],H=$(w[g],g);I||(Qt(e.beforeChange,{args:[H],done:()=>{m(g),N()}}),Tn(s)),t("clickTab",{name:H,title:_,event:T,disabled:I})},Z=s=>{i=s.isFixed,t("scroll",s)},ue=s=>{n.nextTick(()=>{v(s),N(!0)})},Ce=()=>{for(let s=0;s<w.length;s++){const{top:g}=ne(w[s].$el);if(g>X.value)return s===0?0:s-1}return w.length-1},Le=()=>{if(e.scrollspy&&!c){const s=Ce();m(s)}},Ye=()=>w.map((s,g)=>n.createVNode(An,n.mergeProps({key:s.id,id:`${f}-${g}`,ref:E(g),type:e.type,color:e.color,style:s.titleStyle,class:s.titleClass,shrink:e.shrink,isActive:g===p.currentIndex,controls:s.id,scrollable:D.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:T=>K(s,g,T)},Se(s,["dot","badge","title","disabled","showZeroBadge"])),{title:s.$slots.title})),je=()=>{if(e.type==="line"&&w.length)return n.createVNode("div",{class:pe("line"),style:p.lineStyle},null)},b=()=>{var s,g,T;const{type:_,border:I,sticky:H}=e,ee=[n.createVNode("div",{ref:H?void 0:l,class:[pe("wrap"),{[Gt]:_==="line"&&I}]},[n.createVNode("div",{ref:u,role:"tablist",class:pe("nav",[_,{shrink:e.shrink,complete:D.value}]),style:U.value,"aria-orientation":"horizontal"},[(s=o["nav-left"])==null?void 0:s.call(o),Ye(),je(),(g=o["nav-right"])==null?void 0:g.call(o)])]),(T=o["nav-bottom"])==null?void 0:T.call(o)];return H?n.createVNode("div",{ref:l},[ee]):ee};n.watch([()=>e.color,Ie],y),n.watch(()=>e.active,s=>{s!==V.value&&v(s)}),n.watch(()=>w.length,()=>{p.inited&&(v(e.active),y(),n.nextTick(()=>{F(!0)}))});const k=()=>{v(e.active,!0),n.nextTick(()=>{p.inited=!0,l.value&&(a=ne(l.value).height),F(!0)})},B=(s,g)=>t("rendered",s,g);return Q({resize:()=>{y(),n.nextTick(()=>{var s,g;return(g=(s=d.value)==null?void 0:s.swipeRef.value)==null?void 0:g.resize()})},scrollTo:ue}),n.onActivated(y),dt(y),Be(k),le("scroll",Le,{target:h,passive:!0}),S({id:f,props:e,setLine:y,onRendered:B,currentName:V,scrollIntoView:F}),()=>n.createVNode("div",{ref:r,class:pe([e.type])},[e.sticky?n.createVNode($n,{container:r.value,offsetTop:z.value,onScroll:Z},{default:()=>[b()]}):b(),n.createVNode(Hn,{ref:d,count:w.length,inited:p.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:p.currentIndex,onChange:m},{default:()=>{var s;return[(s=o.default)==null?void 0:s.call(o)]}})])}});const jn=Symbol(),[Un,Wn]=P("swipe-item");var Xn=n.defineComponent({name:Un,setup(e,{slots:t}){let o;const a=n.reactive({offset:0,inited:!1,mounted:!1}),{parent:c,index:i}=fe(vt);if(!c){process.env.NODE_ENV!=="production"&&console.error("[Vant] <SwipeItem> must be a child component of <Swipe>.");return}const r=n.computed(()=>{const d={},{vertical:f}=c.props;return c.size.value&&(d[f?"height":"width"]=`${c.size.value}px`),a.offset&&(d.transform=`translate${f?"Y":"X"}(${a.offset}px)`),d}),u=n.computed(()=>{const{loop:d,lazyRender:f}=c.props;if(!f||o)return!0;if(!a.mounted)return!1;const h=c.activeIndicator.value,C=c.count.value-1,E=h===0&&d?C:h-1,w=h===C&&d?0:h+1;return o=i.value===h||i.value===E||i.value===w,o}),l=d=>{a.offset=d};return n.onMounted(()=>{n.nextTick(()=>{a.mounted=!0})}),Q({setOffset:l}),()=>{var d;return n.createVNode("div",{class:Wn(),style:r.value},[u.value?(d=t.default)==null?void 0:d.call(t):null])}}});const Kn=J(Xn),[Zn,Fe]=P("tab"),qn=L({},Cn,{dot:Boolean,name:O,badge:O,title:String,disabled:Boolean,titleClass:Nt,titleStyle:[String,Object],showZeroBadge:Y});var Gn=n.defineComponent({name:Zn,props:qn,setup(e,{slots:t}){const o=ut(),a=n.ref(!1),{parent:c,index:i}=fe(wt);if(!c){process.env.NODE_ENV!=="production"&&console.error("[Vant] <Tab> must be a child component of <Tabs>.");return}const r=()=>{var f;return(f=e.name)!=null?f:i.value},u=()=>{a.value=!0,c.props.lazyRender&&n.nextTick(()=>{c.onRendered(r(),e.title)})},l=n.computed(()=>{const f=r()===c.currentName.value;return f&&!a.value&&u(),f}),d=n.ref(!l.value);return n.watch(l,f=>{f?d.value=!1:re(()=>{d.value=!0})}),n.watch(()=>e.title,()=>{c.setLine(),c.scrollIntoView()}),n.provide(jn,l),()=>{var f;const h=`${c.id}-${i.value}`,{animated:C,swipeable:E,scrollspy:w,lazyRender:S}=c.props;if(!t.default&&!C)return;const p=w||l.value;if(C||E)return n.createVNode(Kn,{id:o,role:"tabpanel",class:Fe("panel-wrapper",{inactive:d.value}),tabindex:l.value?0:-1,"aria-hidden":!l.value,"aria-labelledby":h},{default:()=>{var $;return[n.createVNode("div",{class:Fe("panel")},[($=t.default)==null?void 0:$.call(t)])]}});const U=a.value||w||!S?(f=t.default)==null?void 0:f.call(t):null;return Q({id:o}),n.withDirectives(n.createVNode("div",{id:o,role:"tabpanel",class:Fe("panel"),tabindex:p?0:-1,"aria-labelledby":h},[U]),[[n.vShow,p]])}}});const Jn=J(Gn),Qn=J(Yn),[eo]=P("picker-toolbar"),yt={title:String,cancelButtonText:String,confirmButtonText:String};var to=n.defineComponent({name:eo,props:yt,emits:["confirm","cancel"],setup(e,{emit:t,slots:o}){const a=()=>{if(o.title)return o.title();if(e.title)return n.createVNode("div",{class:[A("title"),"van-ellipsis"]},[e.title])},c=()=>t("cancel"),i=()=>t("confirm"),r=()=>{const l=e.cancelButtonText||we("cancel");return n.createVNode("button",{type:"button",class:[A("cancel"),be],onClick:c},[o.cancel?o.cancel():l])},u=()=>{const l=e.confirmButtonText||we("confirm");return n.createVNode("button",{type:"button",class:[A("confirm"),be],onClick:i},[o.confirm?o.confirm():l])};return()=>n.createVNode("div",{class:A("toolbar")},[o.toolbar?o.toolbar():[r(),a(),u()]])}});const[pt,He]=P("picker-group"),Ct=Symbol(pt),no=L({tabs:de()},yt);n.defineComponent({name:pt,props:no,emits:["confirm","cancel"],setup(e,{emit:t,slots:o}){const{children:a,linkChildren:c}=me(Ct);c();const i=()=>{t("confirm",a.map(u=>u.confirm()))},r=()=>t("cancel");return()=>{var u;const l=(u=o.default)==null?void 0:u.call(o);return n.createVNode("div",{class:He()},[n.createVNode(to,n.mergeProps(e,{onConfirm:i,onCancel:r}),null),n.createVNode(Qn,{shrink:!0,class:He("tabs"),animated:!0},{default:()=>[e.tabs.map((d,f)=>n.createVNode(Jn,{title:d,titleClass:He("tab-title")},{default:()=>[l==null?void 0:l[f]]}))]})])}}});const oo=L({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:M(44),showToolbar:Y,swipeDuration:M(1e3),visibleOptionNum:M(6)},ze),io=L({},oo,{columns:de(),modelValue:de(),toolbarPosition:te("top"),columnsFieldNames:Object}),ie=n.defineComponent({name:"Picker",props:io,emits:["confirm","cancel","change","clickOption","update:modelValue"],setup(e,{emit:t,slots:o}){const a=n.ref(),c=n.ref(e.modelValue.slice(0)),{parent:i}=fe(Ct),{children:r,linkChildren:u}=me(st);u();const l=n.computed(()=>on(e.columnsFieldNames)),d=n.computed(()=>De(e.optionHeight)),f=n.computed(()=>en(e.columns,l.value)),h=n.computed(()=>{const{columns:m}=e;switch(f.value){case"multiple":return m;case"cascade":return tn(m,l.value,c);default:return[m]}}),C=n.computed(()=>h.value.some(m=>m.length)),E=n.computed(()=>h.value.map((m,v)=>Re(m,c.value[v],l.value))),w=(m,v)=>{if(c.value[m]!==v){const N=c.value.slice(0);N[m]=v,c.value=N}},S=()=>({selectedValues:c.value.slice(0),selectedOptions:E.value}),p=(m,v)=>{w(v,m),f.value==="cascade"&&c.value.forEach((N,K)=>{const Z=h.value[K];it(Z,N,l.value)||w(K,Z.length?Z[0][l.value.value]:void 0)}),t("change",L({columnIndex:v},S()))},D=(m,v)=>t("clickOption",L({columnIndex:v,currentOption:m},S())),U=()=>{r.forEach(v=>v.stopMomentum());const m=S();return t("confirm",m),m},$=()=>t("cancel",S()),V=()=>h.value.map((m,v)=>n.createVNode(mn,{value:c.value[v],fields:l.value,options:m,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:d.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:N=>p(N,v),onClickOption:N=>D(N,v)},{option:o.option})),z=m=>{if(C.value){const v={height:`${d.value}px`},N={backgroundSize:`100% ${(m-d.value)/2}px`};return[n.createVNode("div",{class:A("mask"),style:N},null),n.createVNode("div",{class:[Jt,A("frame")],style:v},null)]}},X=()=>{const m=d.value*+e.visibleOptionNum,v={height:`${m}px`};return n.createVNode("div",{ref:a,class:A("columns"),style:v},[V(),z(m)])},F=()=>{if(e.showToolbar&&!i)return n.createVNode(bn,n.mergeProps(Se(e,gn),{onConfirm:U,onCancel:$}),Se(o,vn))};n.watch(h,m=>{m.forEach((v,N)=>{v.length&&!it(v,c.value[N],l.value)&&w(N,ot(v)[l.value.value])})},{immediate:!0});let y;return n.watch(()=>e.modelValue,m=>{!Ne(m,c.value)&&!Ne(m,y)&&(c.value=m.slice(0))},{deep:!0}),n.watch(c,m=>{Ne(m,e.modelValue)||(y=m.slice(0),t("update:modelValue",y))},{immediate:!0}),le("touchmove",Ve,{target:a}),Q({confirm:U,getSelectedOptions:()=>E.value}),()=>{var m,v;return n.createVNode("div",{class:A()},[e.toolbarPosition==="top"?F():null,e.loading?n.createVNode(un,{class:A("loading")},null):null,(m=o["columns-top"])==null?void 0:m.call(o),X(),(v=o["columns-bottom"])==null?void 0:v.call(o),e.toolbarPosition==="bottom"?F():null])}}});ie.install=function(e){e.component(ie.name,ie)};const ao={title:"Picker \u9009\u62E9\u5668",category:"\u6570\u636E\u5C55\u793A",status:"100%",install(e){e.component(ie.name,ie)}};q.Picker=ie,q.default=ao,Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
